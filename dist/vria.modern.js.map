{"version":3,"file":"vria.modern.js","sources":["../src/lib/super-hands/super-hands.js","../src/functions/applyFilters.js","../src/actions/core/visConfigCompiled.js","../src/utils/log.js","../src/actions/core/filterData.js","../src/actions/core/setCallbacks.js","../src/actions/core/markSelected.js","../src/actions/core/setSelection.js","../src/actions/core/setFilters.js","../src/actions/core/setAdditionalFilters.js","../src/actions/core/setOptions.js","../src/actions/actionTypes.js","../src/actions/index.js","../src/reducer/reducer.js","../src/reducer/initialState.js","../src/reducer/DispatchContext.js","../src/grammar/parseDataset.js","../src/grammar/validateVisConfig.js","../src/grammar/compileVisConfig.js","../src/components/core/Legend/GradientLegend.js","../src/components/core/Legend/SymbolLegend.js","../src/components/core/Legend/index.js","../src/components/core/Axes/axes.js","../src/components/core/Axes/index.js","../src/components/core/AxisFilters/index.js","../src/components/core/Marks/index.js","../src/components/core/View/index.js","../src/components/scene/Camera.js","../src/components/scene/Controllers.js","../src/components/scene/setSceneAttributes.js","../src/index.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"===typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"===typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\n/* global AFRAME */\n/* global THREE */\n\nif (typeof AFRAME === 'undefined') {\n  throw new Error('Component attempted to register before AFRAME was available.');\n}\n\nrequire('./systems/super-hands-system.js');\nrequire('./reaction_components/hoverable.js');\nrequire('./reaction_components/grabbable.js');\nrequire('./reaction_components/stretchable.js');\nrequire('./reaction_components/drag-droppable.js');\nrequire('./reaction_components/draggable.js');\nrequire('./reaction_components/droppable.js');\nrequire('./reaction_components/clickable.js');\n\n/**\n * Super Hands component for A-Frame.\n */\nAFRAME.registerComponent('super-hands', {\n  schema: {\n    colliderEvent: { default: 'hit' },\n    colliderEventProperty: { default: 'el' },\n    colliderEndEvent: { default: 'hitend' },\n    colliderEndEventProperty: { default: 'el' },\n    grabStartButtons: {\n      default: ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown', 'pointup', 'thumbup', 'pointingstart', 'pistolstart', 'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    grabEndButtons: {\n      default: ['gripup', 'trackpadup', 'triggerup', 'gripopen', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup', 'pointdown', 'thumbdown', 'pointingend', 'pistolend', 'thumbstickup', 'mouseup', 'touchend']\n    },\n    stretchStartButtons: {\n      default: ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown', 'pointup', 'thumbup', 'pointingstart', 'pistolstart', 'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    stretchEndButtons: {\n      default: ['gripup', 'trackpadup', 'triggerup', 'gripopen', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup', 'pointdown', 'thumbdown', 'pointingend', 'pistolend', 'thumbstickup', 'mouseup', 'touchend']\n    },\n    dragDropStartButtons: {\n      default: ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown', 'pointup', 'thumbup', 'pointingstart', 'pistolstart', 'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    dragDropEndButtons: {\n      default: ['gripup', 'trackpadup', 'triggerup', 'gripopen', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup', 'pointdown', 'thumbdown', 'pointingend', 'pistolend', 'thumbstickup', 'mouseup', 'touchend']\n    },\n    interval: { default: 0 }\n  },\n\n  /**\n   * Set if component needs multiple instancing.\n   */\n  multiple: false,\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function () {\n    // constants\n    this.HOVER_EVENT = 'hover-start';\n    this.UNHOVER_EVENT = 'hover-end';\n    this.GRAB_EVENT = 'grab-start';\n    this.UNGRAB_EVENT = 'grab-end';\n    this.STRETCH_EVENT = 'stretch-start';\n    this.UNSTRETCH_EVENT = 'stretch-end';\n    this.DRAG_EVENT = 'drag-start';\n    this.UNDRAG_EVENT = 'drag-end';\n    this.DRAGOVER_EVENT = 'dragover-start';\n    this.UNDRAGOVER_EVENT = 'dragover-end';\n    this.DRAGDROP_EVENT = 'drag-drop';\n\n    // links to other systems/components\n    this.otherSuperHand = null;\n\n    // state tracking - global event handlers (GEH)\n    this.gehDragged = new Set();\n    this.gehClicking = new Set();\n\n    // state tracking - reaction components\n    this.hoverEls = [];\n    this.hoverElsIntersections = [];\n    this.prevCheckTime = null;\n    this.state = new Map();\n    this.dragging = false;\n\n    this.unHover = this.unHover.bind(this);\n    this.unWatch = this.unWatch.bind(this);\n    this.onHit = this.onHit.bind(this);\n    this.onGrabStartButton = this.onGrabStartButton.bind(this);\n    this.onGrabEndButton = this.onGrabEndButton.bind(this);\n    this.onStretchStartButton = this.onStretchStartButton.bind(this);\n    this.onStretchEndButton = this.onStretchEndButton.bind(this);\n    this.onDragDropStartButton = this.onDragDropStartButton.bind(this);\n    this.onDragDropEndButton = this.onDragDropEndButton.bind(this);\n    this.system.registerMe(this);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function (oldData) {\n    this.unRegisterListeners(oldData);\n    this.registerListeners();\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function () {\n    this.system.unregisterMe(this);\n    this.unRegisterListeners();\n    this.hoverEls.length = 0;\n    if (this.state.get(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT));\n    }\n    this.onGrabEndButton();\n    this.onStretchEndButton();\n    this.onDragDropEndButton();\n  },\n  tick: function () {\n    // closer objects and objects with no distance come later in list\n    function sorter(a, b) {\n      const aDist = a.distance === null ? -1 : a.distance;\n      const bDist = b.distance === null ? -1 : b.distance;\n      if (aDist < bDist) {\n        return 1;\n      }\n      if (bDist < aDist) {\n        return -1;\n      }\n      return 0;\n    }\n    return function (time) {\n      const data = this.data;\n      const prevCheckTime = this.prevCheckTime;\n      if (prevCheckTime && time - prevCheckTime < data.interval) {\n        return;\n      }\n      this.prevCheckTime = time;\n\n      let orderChanged = false;\n      this.hoverElsIntersections.sort(sorter);\n      for (let i = 0; i < this.hoverElsIntersections.length; i++) {\n        if (this.hoverEls[i] !== this.hoverElsIntersections[i].object.el) {\n          orderChanged = true;\n          this.hoverEls[i] = this.hoverElsIntersections[i].object.el;\n        }\n      }\n      if (orderChanged) {\n        this.hover();\n      }\n    };\n  }(),\n  onGrabStartButton: function (evt) {\n    let carried = this.state.get(this.GRAB_EVENT);\n    this.dispatchMouseEventAll('mousedown', this.el);\n    this.gehClicking = new Set(this.hoverEls);\n    if (!carried) {\n      carried = this.findTarget(this.GRAB_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      });\n      if (carried) {\n        this.state.set(this.GRAB_EVENT, carried);\n        this._unHover(carried);\n      }\n    }\n  },\n  onGrabEndButton: function (evt) {\n    const clickables = this.hoverEls.filter(h => this.gehClicking.has(h));\n    const grabbed = this.state.get(this.GRAB_EVENT);\n    const endEvt = { hand: this.el, buttonEvent: evt };\n    this.dispatchMouseEventAll('mouseup', this.el);\n    for (let i = 0; i < clickables.length; i++) {\n      this.dispatchMouseEvent(clickables[i], 'click', this.el);\n    }\n    this.gehClicking.clear();\n    // check if grabbed entity accepts ungrab event\n    if (grabbed && !this.emitCancelable(grabbed, this.UNGRAB_EVENT, endEvt)) {\n      /* push to top of stack so a drop followed by re-grab gets the same\n         target */\n      this.promoteHoveredEl(this.state.get(this.GRAB_EVENT));\n      this.state.delete(this.GRAB_EVENT);\n      this.hover();\n    }\n  },\n  onStretchStartButton: function (evt) {\n    let stretched = this.state.get(this.STRETCH_EVENT);\n    if (!stretched) {\n      stretched = this.findTarget(this.STRETCH_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      });\n      if (stretched) {\n        this.state.set(this.STRETCH_EVENT, stretched);\n        this._unHover(stretched);\n      }\n    }\n  },\n  onStretchEndButton: function (evt) {\n    const stretched = this.state.get(this.STRETCH_EVENT);\n    const endEvt = { hand: this.el, buttonEvent: evt\n      // check if end event accepted\n    };if (stretched && !this.emitCancelable(stretched, this.UNSTRETCH_EVENT, endEvt)) {\n      this.promoteHoveredEl(stretched);\n      this.state.delete(this.STRETCH_EVENT);\n      this.hover();\n    }\n  },\n  onDragDropStartButton: function (evt) {\n    let dragged = this.state.get(this.DRAG_EVENT);\n    this.dragging = true;\n    if (this.hoverEls.length) {\n      this.gehDragged = new Set(this.hoverEls);\n      this.dispatchMouseEventAll('dragstart', this.el);\n    }\n    if (!dragged) {\n      /* prefer carried so that a drag started after a grab will work\n       with carried element rather than a currently intersected drop target.\n       fall back to queue in case a drag is initiated independent\n       of a grab */\n      if (this.state.get(this.GRAB_EVENT) && !this.emitCancelable(this.state.get(this.GRAB_EVENT), this.DRAG_EVENT, { hand: this.el, buttonEvent: evt })) {\n        dragged = this.state.get(this.GRAB_EVENT);\n      } else {\n        dragged = this.findTarget(this.DRAG_EVENT, {\n          hand: this.el,\n          buttonEvent: evt\n        });\n      }\n      if (dragged) {\n        this.state.set(this.DRAG_EVENT, dragged);\n        this._unHover(dragged);\n      }\n    }\n  },\n  onDragDropEndButton: function (evt) {\n    const carried = this.state.get(this.DRAG_EVENT);\n    this.dragging = false; // keep _unHover() from activating another droptarget\n    this.gehDragged.forEach(carried => {\n      this.dispatchMouseEvent(carried, 'dragend', this.el);\n      // fire event both ways for all intersected targets\n      this.dispatchMouseEventAll('drop', carried, true, true);\n      this.dispatchMouseEventAll('dragleave', carried, true, true);\n    });\n    this.gehDragged.clear();\n    if (carried) {\n      const ddEvt = {\n        hand: this.el,\n        dropped: carried,\n        on: null,\n        buttonEvent: evt\n      };\n      const endEvt = { hand: this.el, buttonEvent: evt };\n      const dropTarget = this.findTarget(this.DRAGDROP_EVENT, ddEvt, true);\n      if (dropTarget) {\n        ddEvt.on = dropTarget;\n        this.emitCancelable(carried, this.DRAGDROP_EVENT, ddEvt);\n        this._unHover(dropTarget);\n      }\n      // check if end event accepted\n      if (!this.emitCancelable(carried, this.UNDRAG_EVENT, endEvt)) {\n        this.promoteHoveredEl(carried);\n        this.state.delete(this.DRAG_EVENT);\n        this.hover();\n      }\n    }\n  },\n  processHitEl: function (hitEl, intersection) {\n    const dist = intersection && intersection.distance;\n    const sects = this.hoverElsIntersections;\n    const hoverEls = this.hoverEls;\n    const hitElIndex = this.hoverEls.indexOf(hitEl);\n    let hoverNeedsUpdate = false;\n    if (hitElIndex === -1) {\n      hoverNeedsUpdate = true;\n      // insert in order of distance when available\n      if (dist != null) {\n        let i = 0;\n        while (i < sects.length && dist < sects[i].distance) {\n          i++;\n        }\n        hoverEls.splice(i, 0, hitEl);\n        sects.splice(i, 0, intersection);\n      } else {\n        hoverEls.push(hitEl);\n        sects.push({ object: { el: hitEl } });\n      }\n      this.dispatchMouseEvent(hitEl, 'mouseover', this.el);\n      if (this.dragging && this.gehDragged.size) {\n        // events on targets and on dragged\n        this.gehDragged.forEach(dragged => {\n          this.dispatchMouseEventAll('dragenter', dragged, true, true);\n        });\n      }\n    }\n    return hoverNeedsUpdate;\n  },\n  onHit: function (evt) {\n    const hitEl = evt.detail[this.data.colliderEventProperty];\n    let hoverNeedsUpdate = 0;\n    if (!hitEl) {\n      return;\n    }\n    if (Array.isArray(hitEl)) {\n      for (let i = 0, sect; i < hitEl.length; i++) {\n        sect = evt.detail.intersections && evt.detail.intersections[i];\n        hoverNeedsUpdate += this.processHitEl(hitEl[i], sect);\n      }\n    } else {\n      hoverNeedsUpdate += this.processHitEl(hitEl, null);\n    }\n    if (hoverNeedsUpdate) {\n      this.hover();\n    }\n  },\n  /* search collided entities for target to hover/dragover */\n  hover: function () {\n    var hvrevt, hoverEl;\n    // end previous hover\n    if (this.state.has(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT), true);\n    }\n    if (this.state.has(this.DRAGOVER_EVENT)) {\n      this._unHover(this.state.get(this.DRAGOVER_EVENT), true);\n    }\n    if (this.dragging && this.state.get(this.DRAG_EVENT)) {\n      hvrevt = {\n        hand: this.el,\n        hovered: hoverEl,\n        carried: this.state.get(this.DRAG_EVENT)\n      };\n      hoverEl = this.findTarget(this.DRAGOVER_EVENT, hvrevt, true);\n      if (hoverEl) {\n        this.emitCancelable(this.state.get(this.DRAG_EVENT), this.DRAGOVER_EVENT, hvrevt);\n        this.state.set(this.DRAGOVER_EVENT, hoverEl);\n      }\n    }\n    // fallback to hover if not dragging or dragover wasn't successful\n    if (!this.state.has(this.DRAGOVER_EVENT)) {\n      hoverEl = this.findTarget(this.HOVER_EVENT, { hand: this.el }, true);\n      if (hoverEl) {\n        this.state.set(this.HOVER_EVENT, hoverEl);\n      }\n    }\n  },\n  /* called when controller moves out of collision range of entity */\n  unHover: function (evt) {\n    const clearedEls = evt.detail[this.data.colliderEndEventProperty];\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(el => this._unHover(el));\n      } else {\n        this._unHover(clearedEls);\n      }\n    }\n  },\n  /* inner unHover steps needed regardless of cause of unHover */\n  _unHover: function (el, skipNextHover) {\n    let unHovered = false;\n    let evt;\n    if (el === this.state.get(this.DRAGOVER_EVENT)) {\n      this.state.delete(this.DRAGOVER_EVENT);\n      unHovered = true;\n      evt = {\n        hand: this.el,\n        hovered: el,\n        carried: this.state.get(this.DRAG_EVENT)\n      };\n      this.emitCancelable(el, this.UNDRAGOVER_EVENT, evt);\n      if (this.state.has(this.DRAG_EVENT)) {\n        this.emitCancelable(this.state.get(this.DRAG_EVENT), this.UNDRAGOVER_EVENT, evt);\n      }\n    }\n    if (el === this.state.get(this.HOVER_EVENT)) {\n      this.state.delete(this.HOVER_EVENT);\n      unHovered = true;\n      this.emitCancelable(el, this.UNHOVER_EVENT, { hand: this.el });\n    }\n    // activate next target, if present\n    if (unHovered && !skipNextHover) {\n      this.hover();\n    }\n  },\n  unWatch: function (evt) {\n    const clearedEls = evt.detail[this.data.colliderEndEventProperty];\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(el => this._unWatch(el));\n      } else {\n        // deprecation path: sphere-collider\n        this._unWatch(clearedEls);\n      }\n    }\n  },\n  _unWatch: function (target) {\n    var hoverIndex = this.hoverEls.indexOf(target);\n    if (hoverIndex !== -1) {\n      this.hoverEls.splice(hoverIndex, 1);\n      this.hoverElsIntersections.splice(hoverIndex, 1);\n    }\n    this.gehDragged.forEach(dragged => {\n      this.dispatchMouseEvent(target, 'dragleave', dragged);\n      this.dispatchMouseEvent(dragged, 'dragleave', target);\n    });\n    this.dispatchMouseEvent(target, 'mouseout', this.el);\n  },\n  registerListeners: function () {\n    this.el.addEventListener(this.data.colliderEvent, this.onHit);\n    this.el.addEventListener(this.data.colliderEndEvent, this.unWatch);\n    this.el.addEventListener(this.data.colliderEndEvent, this.unHover);\n\n    // binding order to keep grabEnd from triggering dragover\n    // again before dragDropEnd can delete its carried state\n    this.data.grabStartButtons.forEach(b => {\n      this.el.addEventListener(b, this.onGrabStartButton);\n    });\n    this.data.stretchStartButtons.forEach(b => {\n      this.el.addEventListener(b, this.onStretchStartButton);\n    });\n    this.data.dragDropStartButtons.forEach(b => {\n      this.el.addEventListener(b, this.onDragDropStartButton);\n    });\n    this.data.dragDropEndButtons.forEach(b => {\n      this.el.addEventListener(b, this.onDragDropEndButton);\n    });\n    this.data.stretchEndButtons.forEach(b => {\n      this.el.addEventListener(b, this.onStretchEndButton);\n    });\n    this.data.grabEndButtons.forEach(b => {\n      this.el.addEventListener(b, this.onGrabEndButton);\n    });\n  },\n  unRegisterListeners: function (data) {\n    data = data || this.data;\n    if (Object.keys(data).length === 0) {\n      // Empty object passed on initalization\n      return;\n    }\n    this.el.removeEventListener(data.colliderEvent, this.onHit);\n    this.el.removeEventListener(data.colliderEndEvent, this.unHover);\n    this.el.removeEventListener(data.colliderEndEvent, this.unWatch);\n\n    data.grabStartButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onGrabStartButton);\n    });\n    data.grabEndButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onGrabEndButton);\n    });\n    data.stretchStartButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onStretchStartButton);\n    });\n    data.stretchEndButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onStretchEndButton);\n    });\n    data.dragDropStartButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onDragDropStartButton);\n    });\n    data.dragDropEndButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onDragDropEndButton);\n    });\n  },\n  emitCancelable: function (target, name, detail) {\n    var data, evt;\n    detail = detail || {};\n    data = { bubbles: true, cancelable: true, detail: detail };\n    data.detail.target = data.detail.target || target;\n    evt = new window.CustomEvent(name, data);\n    return target.dispatchEvent(evt);\n  },\n  dispatchMouseEvent: function (target, name, relatedTarget) {\n    var mEvt = new window.MouseEvent(name, { relatedTarget: relatedTarget });\n    target.dispatchEvent(mEvt);\n  },\n  dispatchMouseEventAll: function (name, relatedTarget, filterUsed, alsoReverse) {\n    let els = this.hoverEls;\n    if (filterUsed) {\n      els = els.filter(el => el !== this.state.get(this.GRAB_EVENT) && el !== this.state.get(this.DRAG_EVENT) && el !== this.state.get(this.STRETCH_EVENT) && !this.gehDragged.has(el));\n    }\n    if (alsoReverse) {\n      for (let i = 0; i < els.length; i++) {\n        this.dispatchMouseEvent(els[i], name, relatedTarget);\n        this.dispatchMouseEvent(relatedTarget, name, els[i]);\n      }\n    } else {\n      for (let i = 0; i < els.length; i++) {\n        this.dispatchMouseEvent(els[i], name, relatedTarget);\n      }\n    }\n  },\n  findTarget: function (evType, detail, filterUsed) {\n    var elIndex;\n    var eligibleEls = this.hoverEls;\n    if (filterUsed) {\n      eligibleEls = eligibleEls.filter(el => el !== this.state.get(this.GRAB_EVENT) && el !== this.state.get(this.DRAG_EVENT) && el !== this.state.get(this.STRETCH_EVENT));\n    }\n    for (elIndex = eligibleEls.length - 1; elIndex >= 0; elIndex--) {\n      if (!this.emitCancelable(eligibleEls[elIndex], evType, detail)) {\n        return eligibleEls[elIndex];\n      }\n    }\n    return null;\n  },\n  // Helper to ensure dropping and regrabbing finds the same target for\n  // for order-sorted hoverEls (grabbing; no-op for distance-sorted (pointing)\n  promoteHoveredEl: function (el) {\n    var hoverIndex = this.hoverEls.indexOf(el);\n    if (hoverIndex !== -1 && this.hoverElsIntersections[hoverIndex].distance === null) {\n      this.hoverEls.splice(hoverIndex, 1);\n      const sect = this.hoverElsIntersections.splice(hoverIndex, 1);\n      this.hoverEls.push(el);\n      this.hoverElsIntersections.push(sect[0]);\n    }\n  }\n});\n\n},{\"./reaction_components/clickable.js\":2,\"./reaction_components/drag-droppable.js\":3,\"./reaction_components/draggable.js\":4,\"./reaction_components/droppable.js\":5,\"./reaction_components/grabbable.js\":6,\"./reaction_components/hoverable.js\":7,\"./reaction_components/stretchable.js\":10,\"./systems/super-hands-system.js\":11}],2:[function(require,module,exports){\n\n/* global AFRAME */\nconst buttonCore = require('./prototypes/buttons-proto.js');\nAFRAME.registerComponent('clickable', AFRAME.utils.extendDeep({}, buttonCore, {\n  schema: {\n    onclick: { type: 'string' }\n  },\n  init: function () {\n    this.CLICKED_STATE = 'clicked';\n    this.CLICK_EVENT = 'grab-start';\n    this.UNCLICK_EVENT = 'grab-end';\n    this.clickers = [];\n\n    this.start = this.start.bind(this);\n    this.end = this.end.bind(this);\n    this.el.addEventListener(this.CLICK_EVENT, this.start);\n    this.el.addEventListener(this.UNCLICK_EVENT, this.end);\n  },\n  remove: function () {\n    this.el.removeEventListener(this.CLICK_EVENT, this.start);\n    this.el.removeEventListener(this.UNCLICK_EVENT, this.end);\n  },\n  start: function (evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return;\n    }\n    this.el.addState(this.CLICKED_STATE);\n    if (this.clickers.indexOf(evt.detail.hand) === -1) {\n      this.clickers.push(evt.detail.hand);\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      }\n    }\n  },\n  end: function (evt) {\n    const handIndex = this.clickers.indexOf(evt.detail.hand);\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    if (handIndex !== -1) {\n      this.clickers.splice(handIndex, 1);\n    }\n    if (this.clickers.length < 1) {\n      this.el.removeState(this.CLICKED_STATE);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n}));\n\n},{\"./prototypes/buttons-proto.js\":8}],3:[function(require,module,exports){\n\n/* global AFRAME */\nconst inherit = AFRAME.utils.extendDeep;\nconst buttonCore = require('./prototypes/buttons-proto.js');\n\nAFRAME.registerComponent('drag-droppable', inherit({}, buttonCore, {\n  init: function () {\n    console.warn('Warning: drag-droppable is deprecated. Use draggable and droppable components instead');\n    this.HOVERED_STATE = 'dragover';\n    this.DRAGGED_STATE = 'dragged';\n    this.HOVER_EVENT = 'dragover-start';\n    this.UNHOVER_EVENT = 'dragover-end';\n    this.DRAG_EVENT = 'drag-start';\n    this.UNDRAG_EVENT = 'drag-end';\n    this.DRAGDROP_EVENT = 'drag-drop';\n\n    this.hoverStart = this.hoverStart.bind(this);\n    this.dragStart = this.dragStart.bind(this);\n    this.hoverEnd = this.hoverEnd.bind(this);\n    this.dragEnd = this.dragEnd.bind(this);\n    this.dragDrop = this.dragDrop.bind(this);\n\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStart);\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStart);\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEnd);\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEnd);\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDrop);\n  },\n  remove: function () {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStart);\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart);\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEnd);\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd);\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDrop);\n  },\n  hoverStart: function (evt) {\n    this.el.addState(this.HOVERED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  dragStart: function (evt) {\n    if (!this.startButtonOk(evt)) {\n      return;\n    }\n    this.el.addState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  hoverEnd: function (evt) {\n    this.el.removeState(this.HOVERED_STATE);\n  },\n  dragEnd: function (evt) {\n    if (!this.endButtonOk(evt)) {\n      return;\n    }\n    this.el.removeState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  dragDrop: function (evt) {\n    if (!this.endButtonOk(evt)) {\n      return;\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n}));\n\n},{\"./prototypes/buttons-proto.js\":8}],4:[function(require,module,exports){\n\n/* global AFRAME */\nconst inherit = AFRAME.utils.extendDeep;\nconst buttonCore = require('./prototypes/buttons-proto.js');\n\nAFRAME.registerComponent('draggable', inherit({}, buttonCore, {\n  init: function () {\n    this.DRAGGED_STATE = 'dragged';\n    this.DRAG_EVENT = 'drag-start';\n    this.UNDRAG_EVENT = 'drag-end';\n\n    this.dragStartBound = this.dragStart.bind(this);\n    this.dragEndBound = this.dragEnd.bind(this);\n\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStartBound);\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEndBound);\n  },\n  remove: function () {\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart);\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd);\n  },\n  dragStart: function (evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return;\n    }\n    this.el.addState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  dragEnd: function (evt) {\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    this.el.removeState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n}));\n\n},{\"./prototypes/buttons-proto.js\":8}],5:[function(require,module,exports){\n\n/* global AFRAME */\nfunction elementMatches(el, selector) {\n  if (el.matches) {\n    return el.matches(selector);\n  }\n  if (el.msMatchesSelector) {\n    return el.msMatchesSelector(selector);\n  }\n  if (el.webkitMatchesSelector) {\n    return el.webkitMatchesSelector(selector);\n  }\n}\nAFRAME.registerComponent('droppable', {\n  schema: {\n    accepts: { default: '' },\n    autoUpdate: { default: true },\n    acceptEvent: { default: '' },\n    rejectEvent: { default: '' }\n  },\n  multiple: true,\n  init: function () {\n    this.HOVERED_STATE = 'dragover';\n    this.HOVER_EVENT = 'dragover-start';\n    this.UNHOVER_EVENT = 'dragover-end';\n    this.DRAGDROP_EVENT = 'drag-drop';\n\n    // better for Sinon spying if original method not overwritten\n    this.hoverStartBound = this.hoverStart.bind(this);\n    this.hoverEndBound = this.hoverEnd.bind(this);\n    this.dragDropBound = this.dragDrop.bind(this);\n    this.mutateAcceptsBound = this.mutateAccepts.bind(this);\n\n    this.acceptableEntities = [];\n    this.observer = new window.MutationObserver(this.mutateAcceptsBound);\n    this.observerOpts = { childList: true, subtree: true };\n\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStartBound);\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEndBound);\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDropBound);\n  },\n  update: function () {\n    if (this.data.accepts.length) {\n      this.acceptableEntities = Array.prototype.slice.call(this.el.sceneEl.querySelectorAll(this.data.accepts));\n    } else {\n      this.acceptableEntities = null;\n    }\n    if (this.data.autoUpdate && this.acceptableEntities != null) {\n      this.observer.observe(this.el.sceneEl, this.observerOpts);\n    } else {\n      this.observer.disconnect();\n    }\n  },\n  remove: function () {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStartBound);\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEndBound);\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDropBound);\n    this.observer.disconnect();\n  },\n  mutateAccepts: function (mutations) {\n    const query = this.data.accepts;\n    mutations.forEach(mutation => {\n      mutation.addedNodes.forEach(added => {\n        if (elementMatches(added, query)) {\n          this.acceptableEntities.push(added);\n        }\n      });\n    });\n  },\n  entityAcceptable: function (entity) {\n    const acceptableEntities = this.acceptableEntities;\n    if (acceptableEntities === null) {\n      return true;\n    }\n    for (let item of acceptableEntities) {\n      if (item === entity) {\n        return true;\n      }\n    }\n    return false;\n  },\n  hoverStart: function (evt) {\n    if (evt.defaultPrevented || !this.entityAcceptable(evt.detail.carried)) {\n      return;\n    }\n    this.el.addState(this.HOVERED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  hoverEnd: function (evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    this.el.removeState(this.HOVERED_STATE);\n  },\n  dragDrop: function (evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    const dropped = evt.detail.dropped;\n    if (!this.entityAcceptable(dropped)) {\n      if (this.data.rejectEvent.length) {\n        this.el.emit(this.data.rejectEvent, { el: dropped });\n      }\n      return;\n    }\n    if (this.data.acceptEvent.length) {\n      this.el.emit(this.data.acceptEvent, { el: dropped });\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n});\n\n},{}],6:[function(require,module,exports){\n\n/* global AFRAME, THREE */\nconst inherit = AFRAME.utils.extendDeep;\nconst physicsCore = require('./prototypes/physics-grab-proto.js');\nconst buttonsCore = require('./prototypes/buttons-proto.js');\n// new object with all core modules\nconst base = inherit({}, physicsCore, buttonsCore);\nAFRAME.registerComponent('grabbable', inherit(base, {\n  schema: {\n    maxGrabbers: { type: 'int', default: NaN },\n    invert: { default: false },\n    suppressX: { default: false },\n    suppressY: { default: false },\n    suppressZ: { default: false }\n  },\n  init: function () {\n    this.GRABBED_STATE = 'grabbed';\n    this.GRAB_EVENT = 'grab-start';\n    this.UNGRAB_EVENT = 'grab-end';\n    this.grabbed = false;\n    this.grabbers = [];\n    this.constraints = new Map();\n    this.deltaPositionIsValid = false;\n    this.grabDistance = undefined;\n    this.grabDirection = { x: 0, y: 0, z: -1 };\n    this.grabOffset = { x: 0, y: 0, z: 0\n      // persistent object speeds up repeat setAttribute calls\n    };this.destPosition = { x: 0, y: 0, z: 0 };\n    this.deltaPosition = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n    this.physicsInit();\n\n    this.el.addEventListener(this.GRAB_EVENT, e => this.start(e));\n    this.el.addEventListener(this.UNGRAB_EVENT, e => this.end(e));\n    this.el.addEventListener('mouseout', e => this.lostGrabber(e));\n  },\n  update: function () {\n    this.physicsUpdate();\n    this.xFactor = (this.data.invert ? -1 : 1) * !this.data.suppressX;\n    this.yFactor = (this.data.invert ? -1 : 1) * !this.data.suppressY;\n    this.zFactor = (this.data.invert ? -1 : 1) * !this.data.suppressZ;\n  },\n  tick: function () {\n    var q = new THREE.Quaternion();\n    var v = new THREE.Vector3();\n\n    return function () {\n      var entityPosition;\n      if (this.grabber) {\n        // reflect on z-axis to point in same direction as the laser\n        this.targetPosition.copy(this.grabDirection);\n        this.targetPosition.applyQuaternion(this.grabber.object3D.getWorldQuaternion(q)).setLength(this.grabDistance).add(this.grabber.object3D.getWorldPosition(v)).add(this.grabOffset);\n        if (this.deltaPositionIsValid) {\n          // relative position changes work better with nested entities\n          this.deltaPosition.sub(this.targetPosition);\n          entityPosition = this.el.getAttribute('position');\n          this.destPosition.x = entityPosition.x - this.deltaPosition.x * this.xFactor;\n          this.destPosition.y = entityPosition.y - this.deltaPosition.y * this.yFactor;\n          this.destPosition.z = entityPosition.z - this.deltaPosition.z * this.zFactor;\n          this.el.setAttribute('position', this.destPosition);\n        } else {\n          this.deltaPositionIsValid = true;\n        }\n        this.deltaPosition.copy(this.targetPosition);\n      }\n    };\n  }(),\n  remove: function () {\n    this.el.removeEventListener(this.GRAB_EVENT, this.start);\n    this.el.removeEventListener(this.UNGRAB_EVENT, this.end);\n    this.physicsRemove();\n  },\n  start: function (evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return;\n    }\n    // room for more grabbers?\n    const grabAvailable = !Number.isFinite(this.data.maxGrabbers) || this.grabbers.length < this.data.maxGrabbers;\n\n    if (this.grabbers.indexOf(evt.detail.hand) === -1 && grabAvailable) {\n      if (!evt.detail.hand.object3D) {\n        console.warn('grabbable entities must have an object3D');\n        return;\n      }\n      this.grabbers.push(evt.detail.hand);\n      // initiate physics if available, otherwise manual\n      if (!this.physicsStart(evt) && !this.grabber) {\n        this.grabber = evt.detail.hand;\n        this.resetGrabber();\n      }\n      // notify super-hands that the gesture was accepted\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      }\n      this.grabbed = true;\n      this.el.addState(this.GRABBED_STATE);\n    }\n  },\n  end: function (evt) {\n    const handIndex = this.grabbers.indexOf(evt.detail.hand);\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    if (handIndex !== -1) {\n      this.grabbers.splice(handIndex, 1);\n      this.grabber = this.grabbers[0];\n    }\n    this.physicsEnd(evt);\n    if (!this.resetGrabber()) {\n      this.grabbed = false;\n      this.el.removeState(this.GRABBED_STATE);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  resetGrabber: function () {\n    var objPos = new THREE.Vector3();\n    var grabPos = new THREE.Vector3();\n    return function () {\n      let raycaster;\n      if (!this.grabber) {\n        return false;\n      }\n      raycaster = this.grabber.getAttribute('raycaster');\n      this.deltaPositionIsValid = false;\n      this.grabDistance = this.el.object3D.getWorldPosition(objPos).distanceTo(this.grabber.object3D.getWorldPosition(grabPos));\n      if (raycaster) {\n        this.grabDirection = raycaster.direction;\n        this.grabOffset = raycaster.origin;\n      }\n      return true;\n    };\n  }(),\n  lostGrabber: function (evt) {\n    let i = this.grabbers.indexOf(evt.relatedTarget);\n    // if a queued, non-physics grabber leaves the collision zone, forget it\n    if (i !== -1 && evt.relatedTarget !== this.grabber && !this.physicsIsConstrained(evt.relatedTarget)) {\n      this.grabbers.splice(i, 1);\n    }\n  }\n}));\n\n},{\"./prototypes/buttons-proto.js\":8,\"./prototypes/physics-grab-proto.js\":9}],7:[function(require,module,exports){\n\n/* global AFRAME */\nAFRAME.registerComponent('hoverable', {\n  init: function () {\n    this.HOVERED_STATE = 'hovered';\n    this.HOVER_EVENT = 'hover-start';\n    this.UNHOVER_EVENT = 'hover-end';\n\n    this.hoverers = [];\n\n    this.start = this.start.bind(this);\n    this.end = this.end.bind(this);\n\n    this.el.addEventListener(this.HOVER_EVENT, this.start);\n    this.el.addEventListener(this.UNHOVER_EVENT, this.end);\n  },\n  remove: function () {\n    this.el.removeEventListener(this.HOVER_EVENT, this.start);\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.end);\n  },\n  start: function (evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    this.el.addState(this.HOVERED_STATE);\n    if (this.hoverers.indexOf(evt.detail.hand) === -1) {\n      this.hoverers.push(evt.detail.hand);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  end: function (evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    var handIndex = this.hoverers.indexOf(evt.detail.hand);\n    if (handIndex !== -1) {\n      this.hoverers.splice(handIndex, 1);\n    }\n    if (this.hoverers.length < 1) {\n      this.el.removeState(this.HOVERED_STATE);\n    }\n  }\n});\n\n},{}],8:[function(require,module,exports){\n\n// common code used in customizing reaction components by button\nmodule.exports = function () {\n  function buttonIsValid(evt, buttonList) {\n    return buttonList.length === 0 || buttonList.indexOf(evt.detail.buttonEvent.type) !== -1;\n  }\n  return {\n    schema: {\n      startButtons: { default: [] },\n      endButtons: { default: [] }\n    },\n    startButtonOk: function (evt) {\n      return buttonIsValid(evt, this.data['startButtons']);\n    },\n    endButtonOk: function (evt) {\n      return buttonIsValid(evt, this.data['endButtons']);\n    }\n  };\n}();\n\n},{}],9:[function(require,module,exports){\n\n// base code used by grabbable for physics interactions\nmodule.exports = {\n  schema: {\n    usePhysics: { default: 'ifavailable' }\n  },\n  physicsInit: function () {\n    this.constraints = new Map();\n  },\n  physicsUpdate: function () {\n    if (this.data.usePhysics === 'never' && this.constraints.size) {\n      this.physicsClear();\n    }\n  },\n  physicsRemove: function () {\n    this.physicsClear();\n  },\n  physicsStart: function (evt) {\n    // initiate physics constraint if available and not already existing\n    if (this.data.usePhysics !== 'never' && this.el.body && evt.detail.hand.body && !this.constraints.has(evt.detail.hand)) {\n      const newConId = Math.random().toString(36).substr(2, 9);\n      this.el.setAttribute('constraint__' + newConId, {\n        target: evt.detail.hand\n      });\n      this.constraints.set(evt.detail.hand, newConId);\n      return true;\n    }\n    // Prevent manual grab by returning true\n    if (this.data.usePhysics === 'only') {\n      return true;\n    }\n    return false;\n  },\n  physicsEnd: function (evt) {\n    let constraintId = this.constraints.get(evt.detail.hand);\n    if (constraintId) {\n      this.el.removeAttribute('constraint__' + constraintId);\n      this.constraints.delete(evt.detail.hand);\n    }\n  },\n  physicsClear: function () {\n    if (this.el.body) {\n      for (let c of this.constraints.values()) {\n        this.el.body.world.removeConstraint(c);\n      }\n    }\n    this.constraints.clear();\n  },\n  physicsIsConstrained: function (el) {\n    return this.constraints.has(el);\n  },\n  physicsIsGrabbing() {\n    return this.constraints.size > 0;\n  }\n};\n\n},{}],10:[function(require,module,exports){\n\n/* global AFRAME, THREE */\nconst inherit = AFRAME.utils.extendDeep;\nconst buttonsCore = require('./prototypes/buttons-proto.js');\n// new object with all core modules\nconst base = inherit({}, buttonsCore);\nAFRAME.registerComponent('stretchable', inherit(base, {\n  schema: {\n    usePhysics: { default: 'ifavailable' },\n    invert: { default: false },\n    physicsUpdateRate: { default: 100 }\n  },\n  init: function () {\n    this.STRETCHED_STATE = 'stretched';\n    this.STRETCH_EVENT = 'stretch-start';\n    this.UNSTRETCH_EVENT = 'stretch-end';\n    this.stretched = false;\n    this.stretchers = [];\n\n    this.scale = new THREE.Vector3();\n    this.handPos = new THREE.Vector3();\n    this.otherHandPos = new THREE.Vector3();\n\n    this.start = this.start.bind(this);\n    this.end = this.end.bind(this);\n\n    this.el.addEventListener(this.STRETCH_EVENT, this.start);\n    this.el.addEventListener(this.UNSTRETCH_EVENT, this.end);\n  },\n  update: function (oldDat) {\n    this.updateBodies = AFRAME.utils.throttleTick(this._updateBodies, this.data.physicsUpdateRate, this);\n  },\n  tick: function (time, timeDelta) {\n    if (!this.stretched) {\n      return;\n    }\n    this.scale.copy(this.el.getAttribute('scale'));\n    this.stretchers[0].object3D.getWorldPosition(this.handPos);\n    this.stretchers[1].object3D.getWorldPosition(this.otherHandPos);\n    const currentStretch = this.handPos.distanceTo(this.otherHandPos);\n    let deltaStretch = 1;\n    if (this.previousStretch !== null && currentStretch !== 0) {\n      deltaStretch = Math.pow(currentStretch / this.previousStretch, this.data.invert ? -1 : 1);\n    }\n    this.previousStretch = currentStretch;\n    if (this.previousPhysicsStretch === null) {\n      // establish correct baseline even if throttled function isn't called\n      this.previousPhysicsStretch = currentStretch;\n    }\n    this.scale.multiplyScalar(deltaStretch);\n    this.el.setAttribute('scale', this.scale);\n    // scale update for all nested physics bodies (throttled)\n    this.updateBodies(time, timeDelta);\n  },\n  remove: function () {\n    this.el.removeEventListener(this.STRETCH_EVENT, this.start);\n    this.el.removeEventListener(this.UNSTRETCH_EVENT, this.end);\n  },\n  start: function (evt) {\n    if (this.stretched || this.stretchers.includes(evt.detail.hand) || !this.startButtonOk(evt) || evt.defaultPrevented) {\n      return;\n    } // already stretched or already captured this hand or wrong button\n    this.stretchers.push(evt.detail.hand);\n    if (this.stretchers.length === 2) {\n      this.stretched = true;\n      this.previousStretch = null;\n      this.previousPhysicsStretch = null;\n      this.el.addState(this.STRETCHED_STATE);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } // gesture accepted\n  },\n  end: function (evt) {\n    var stretcherIndex = this.stretchers.indexOf(evt.detail.hand);\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    if (stretcherIndex !== -1) {\n      this.stretchers.splice(stretcherIndex, 1);\n      this.stretched = false;\n      this.el.removeState(this.STRETCHED_STATE);\n      // override throttle to push last stretch to physics bodies\n      this._updateBodies();\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  _updateBodies: function () {\n    if (!this.el.body || this.data.usePhysics === 'never') {\n      return;\n    }\n    const currentStretch = this.previousStretch; // last visible geometry stretch\n    let deltaStretch = 1;\n    if (this.previousPhysicsStretch !== null && currentStretch > 0) {\n      deltaStretch = Math.pow(currentStretch / this.previousPhysicsStretch, this.data.invert ? -1 : 1);\n    }\n    this.previousPhysicsStretch = currentStretch;\n    if (deltaStretch === 1) {\n      return;\n    }\n    for (let c of this.el.childNodes) {\n      this.stretchBody(c, deltaStretch);\n    }\n    this.stretchBody(this.el, deltaStretch);\n  },\n  stretchBody: function (el, deltaStretch) {\n    if (!el.body) {\n      return;\n    }\n    let physicsShape;\n    let offset;\n    for (let i = 0; i < el.body.shapes.length; i++) {\n      physicsShape = el.body.shapes[i];\n      if (physicsShape.halfExtents) {\n        physicsShape.halfExtents.scale(deltaStretch, physicsShape.halfExtents);\n        physicsShape.updateConvexPolyhedronRepresentation();\n      } else if (physicsShape.radius) {\n        physicsShape.radius *= deltaStretch;\n        physicsShape.updateBoundingSphereRadius();\n      } else if (!this.shapeWarned) {\n        console.warn('Unable to stretch physics body: unsupported shape');\n        this.shapeWarned = true;\n      }\n      // also move offset to match scale change\n      offset = el.body.shapeOffsets[i];\n      offset.scale(deltaStretch, offset);\n    }\n    el.body.updateBoundingRadius();\n  }\n}));\n\n},{\"./prototypes/buttons-proto.js\":8}],11:[function(require,module,exports){\n\n/* global AFRAME */\nAFRAME.registerSystem('super-hands', {\n  init: function () {\n    this.superHands = [];\n  },\n  registerMe: function (comp) {\n    // when second hand registers, store links\n    if (this.superHands.length === 1) {\n      this.superHands[0].otherSuperHand = comp;\n      comp.otherSuperHand = this.superHands[0];\n    }\n    this.superHands.push(comp);\n  },\n  unregisterMe: function (comp) {\n    var index = this.superHands.indexOf(comp);\n    if (index !== -1) {\n      this.superHands.splice(index, 1);\n    }\n    this.superHands.forEach(x => {\n      if (x.otherSuperHand === comp) {\n        x.otherSuperHand = null;\n      }\n    });\n  }\n});\n\n},{}]},{},[1]);\n","/**\n * @name applyFilters\n * @description Applies domain filters to a dataset\n * @author Peter Butcher <pete@pbutcher.uk>\n * @param {object} dataset - Dataset to filter\n * @param {object} domainMap - All domains in this vis-config\n * @returns {object} Filtered dataset\n */\nfunction applyFilters(dataset, domainMap) {\n  const filteredDataset = [];\n\n  const marks = document.querySelectorAll('.vria-mark');\n\n  // Hide all marks\n  marks.forEach((el) => {\n    el.setAttribute('visible', false);\n    el.classList.remove('interactive');\n  });\n\n  // Loop over every row in the dataset\n  dataset.forEach((row) => {\n    let filtersSatisfied = true;\n\n    // For every field...\n    Object.keys(row).forEach((field) => {\n      // If a field has a filter associated with it...\n      if (domainMap.has(field)) {\n        // A domainMap domain is empty...\n        if (domainMap.get(field).length === 0) {\n          filtersSatisfied = false;\n        } else if (typeof domainMap.get(field)[0] === 'string') {\n          // For filters containing strings\n          // If the value of this field isn't in the filter array...\n          if (!domainMap.get(field).includes(row[field])) {\n            // Discard this row\n            filtersSatisfied = false;\n          }\n          // For filters containing numbers\n        } else {\n          if (\n            row[field] < domainMap.get(field)[0] ||\n            row[field] > domainMap.get(field)[1]\n          ) {\n            filtersSatisfied = false;\n          }\n        }\n      }\n    });\n\n    if (filtersSatisfied) {\n      filteredDataset.push(row);\n      document.querySelectorAll(`.vria-${row.vriaid}`).forEach((el) => {\n        el.setAttribute('visible', true);\n        el.classList.add('interactive');\n      });\n    }\n  });\n\n  return filteredDataset;\n}\n\nexport default applyFilters;\n","import cloneDeep from 'lodash/cloneDeep';\nimport { applyFilters } from '../../functions';\n\nconst visConfigCompiled = (state, payload) => {\n  return {\n    ...state,\n    compiledConfig: payload.compiledConfig,\n    parsedDataset: payload.dataset,\n    filteredDataset: applyFilters(payload.dataset, payload.domainMap),\n    initialDomainMap: cloneDeep(payload.domainMap),\n    domainMap: payload.domainMap,\n    scales: payload.scales\n  };\n};\n\nexport default visConfigCompiled;\n","function debug(msg, ...rest) {\n  if (process.env.NODE_ENV === 'development') {\n    console.log(`VRIA Debug:`, msg, ...rest);\n  }\n}\n\nfunction warn(msg) {\n  console.warn(`VRIA Warning: ${msg}`);\n}\n\nfunction error(msg, ...rest) {\n  console.error(`VRIA Error: ${msg}`, ...rest);\n  throw new Error(`VRIA Error: ${msg}`, msg);\n}\n\nfunction mode() {\n  if (process.env.NODE_ENV === 'development') {\n    console.log(`VRIA in development mode...`);\n  }\n}\n\nexport default {\n  debug,\n  warn,\n  error,\n  mode\n};\n","import { applyFilters } from '../../functions';\nimport { log } from '../../utils';\n\nconst filterData = (state, payload) => {\n  const { value, field, bound, type } = payload;\n\n  let filteredDomain;\n\n  switch (type) {\n    case 'legend':\n      if (state.domainMap.get(field).includes(value)) {\n        filteredDomain = state.domainMap.get(field).filter((v) => v !== value);\n      } else {\n        // Check if this value was in the original domain\n        if (state.initialDomainMap.get(field).includes(value)) {\n          filteredDomain = state.domainMap.get(field);\n          filteredDomain.push(value);\n        } else {\n          log.error(\n            `filterData - Value not added, ${value} was not in original domain`\n          );\n        }\n      }\n      break;\n    case 'axis':\n      // TODO: Make available for non-quantitative axes?\n      filteredDomain = state.domainMap.get(field);\n      // Only update the filter if the new value is within the bounds of the original domain\n      if (bound === 0) {\n        if (value > state.initialDomainMap.get(field)[0]) {\n          filteredDomain[bound] = value;\n        } else {\n          filteredDomain[bound] = state.initialDomainMap.get(field)[0];\n        }\n      } else {\n        if (value < state.initialDomainMap.get(field)[1]) {\n          filteredDomain[bound] = value;\n        } else {\n          filteredDomain[bound] = state.initialDomainMap.get(field)[1];\n        }\n      }\n      break;\n  }\n\n  const newDomainMap = new Map(state.domainMap).set(field, filteredDomain);\n\n  return {\n    ...state,\n    filteredDataset: applyFilters(state.parsedDataset, newDomainMap),\n    domainMap: newDomainMap\n  };\n};\n\nexport default filterData;\n","const setCallbacks = (state, payload) => {\n  return {\n    ...state,\n    appCallback: payload.appCallback\n  };\n};\n\nexport default setCallbacks;\n","import cloneDeep from 'lodash/cloneDeep';\n\nconst markSelected = (state, payload) => {\n  const selection = {\n    dataMap: new Map(state.selection.dataMap),\n    data: [],\n    marks: []\n  };\n\n  const setMarkData = () => {\n    // Remove vriaid and add to selection map\n    const selectedRow = cloneDeep(\n      state.filteredDataset.filter((el) => el.vriaid === payload.id)\n    );\n    delete selectedRow[0].vriaid;\n    selection.dataMap.set(payload.vriaid, ...selectedRow);\n  };\n\n  if (state.selection.dataMap.has(payload.vriaid)) {\n    // Update selection map if mark was deselected\n    selection.dataMap.delete(payload.vriaid);\n  } else if (\n    state.options.multiSelect === true ||\n    selection.dataMap.size === 0\n  ) {\n    setMarkData();\n  } else if (\n    state.options.multiSelect === false &&\n    selection.dataMap.size === 1\n  ) {\n    // Switch selected to another mark\n    selection.dataMap.delete(selection.dataMap.keys().next().value);\n    setMarkData();\n  }\n\n  // Add raw data values to selection data array\n  selection.data = [...selection.dataMap.values()];\n\n  // Add mark classnames to marks array\n  selection.marks = [...selection.dataMap.keys()];\n\n  // Reset colour on all marks\n  document.querySelectorAll('[selected]').forEach((el) => {\n    el.setAttribute('color', el.getAttribute('initialColor'));\n    el.removeAttribute('selected');\n    el.removeAttribute('vria-only-selected-mark');\n    if (el.getAttribute('wireframe')) {\n      el.setAttribute('opacity', 0);\n    }\n  });\n\n  // Set selected colour on selected marks\n  if (selection.dataMap.size !== 0) {\n    selection.dataMap.forEach((value, key) => {\n      document.querySelectorAll(`.${key}`).forEach((el) => {\n        el.setAttribute('selected', true);\n        el.setAttribute('color', state.options.selectColor);\n        if (selection.dataMap.size === 1) {\n          el.setAttribute('vria-only-selected-mark', true);\n        }\n        if (el.getAttribute('wireframe')) {\n          el.setAttribute('opacity', 1);\n        }\n      });\n    });\n  }\n\n  // Set tooltip if a single mark is selected\n  if (selection.dataMap.size === 1) {\n    if (payload.showTooltip !== null && payload.showTooltip !== undefined) {\n      const tooltip = payload.cursor;\n      tooltip.setAttribute('height', payload.tooltipHeight);\n      tooltip.setAttribute('visible', true);\n      tooltip.setAttribute('text', {\n        ...tooltip.getAttribute('text'),\n        value: payload.tooltipContent\n      });\n    }\n  }\n\n  return {\n    ...state,\n    selection\n  };\n};\n\nexport default markSelected;\n","import cloneDeep from 'lodash/cloneDeep';\n\nconst setSelection = (state, payload) => {\n  const clearSelection = {\n    dataMap: new Map(),\n    data: [],\n    marks: []\n  };\n  let selection;\n  if (\n    Object.hasOwnProperty.call(payload, 'dataMap') &&\n    Object.hasOwnProperty.call(payload, 'data') &&\n    Object.hasOwnProperty.call(payload, 'marks')\n  ) {\n    selection = cloneDeep(payload);\n  } else {\n    selection = clearSelection;\n  }\n\n  // Reset selection state and colour on all marks\n  document.querySelectorAll('[selected]').forEach((el) => {\n    el.setAttribute('color', el.getAttribute('initialColor'));\n    el.removeAttribute('selected');\n    el.removeAttribute('vria-only-selected-mark');\n  });\n\n  // Set selected colour on selected marks\n  if (selection.dataMap.size !== 0) {\n    selection.dataMap.forEach((value, key) => {\n      document.querySelectorAll(`.${key}`).forEach((el) => {\n        el.setAttribute('selected', true);\n        el.setAttribute('color', state.options.selectColor);\n        if (selection.dataMap.size === 1) {\n          el.setAttribute('vria-only-selected-mark', true);\n        }\n      });\n    });\n  }\n\n  return {\n    ...state,\n    selection\n  };\n};\n\nexport default setSelection;\n","import { applyFilters } from '../../functions';\nimport cloneDeep from 'lodash/cloneDeep';\n\nconst setFilters = (state, payload) => {\n  return {\n    ...state,\n    filteredDataset: applyFilters(state.parsedDataset, payload),\n    domainMap: cloneDeep(payload)\n  };\n};\n\nexport default setFilters;\n","const setAdditionalFilters = (state, payload) => {\n  return {\n    ...state,\n    additionalFilters: payload\n  };\n};\n\nexport default setAdditionalFilters;\n","const setOptions = (state, payload) => {\n  return {\n    ...state,\n    options: {\n      ...state.options,\n      ...payload\n    }\n  };\n};\n\nexport default setOptions;\n","// Core Actions\nconst coreActions = {\n  VIS_CONFIG_COMPILED: 'VIS_CONFIG_COMPILED',\n  FILTER_DATA: 'FILTER_DATA',\n  SET_CALLBACKS: 'SET_CALLBACKS',\n  MARK_SELECTED: 'MARK_SELECTED',\n  SET_SELECTION: 'SET_SELECTION',\n  SET_FILTERS: 'SET_FILTERS',\n  SET_ADDITIONAL_FILTERS: 'SET_ADDITIONAL_FILTERS',\n  SET_OPTIONS: 'SET_OPTIONS'\n};\n\nexport default {\n  ...coreActions\n};\n","import visConfigCompiled from './core/visConfigCompiled';\nimport filterData from './core/filterData';\nimport setCallbacks from './core/setCallbacks';\nimport markSelected from './core/markSelected';\nimport setSelection from './core/setSelection';\nimport setFilters from './core/setFilters';\nimport setAdditionalFilters from './core/setAdditionalFilters';\nimport setOptions from './core/setOptions';\n\nexport { default as actionTypes } from './actionTypes';\n\nexport default {\n  visConfigCompiled,\n  filterData,\n  setCallbacks,\n  markSelected,\n  setSelection,\n  setFilters,\n  setAdditionalFilters,\n  setOptions\n};\n","import actions, { actionTypes } from '../actions';\nimport { log } from '../utils';\n\nconst reducer = (state, { type, payload }) => {\n  log.debug('reducer', type, payload);\n  switch (type) {\n    // VIS_CONFIG_COMPILED\n    case actionTypes.VIS_CONFIG_COMPILED:\n      return actions.visConfigCompiled(state, payload);\n    // FILTER_DATA\n    case actionTypes.FILTER_DATA:\n      return actions.filterData(state, payload);\n    // SET_CALLBACKS\n    case actionTypes.SET_CALLBACKS:\n      return actions.setCallbacks(state, payload);\n    // MARK_SELECTED\n    case actionTypes.MARK_SELECTED:\n      return actions.markSelected(state, payload);\n    // SET_SELECTION\n    case actionTypes.SET_SELECTION:\n      return actions.setSelection(state, payload);\n    // SET_FILTERS\n    case actionTypes.SET_FILTERS:\n      return actions.setFilters(state, payload);\n    // SET_ADDITIONAL_FILTERS\n    case actionTypes.SET_ADDITIONAL_FILTERS:\n      return actions.setAdditionalFilters(state, payload);\n    // SET_OPTIONS\n    case actionTypes.SET_OPTIONS:\n      return actions.setOptions(state, payload);\n    default:\n      log.debug(`reducer - Unknown action type: ${type}`);\n      break;\n  }\n};\n\nexport default reducer;\n","export default {\n  compiledConfig: null,\n  parsedDataset: null,\n  filteredDataset: null,\n  domainMap: null,\n  scales: null,\n  selection: { dataMap: new Map(), values: [], marks: [] }\n};\n","import React from 'react';\n\nconst DispatchContext = React.createContext(null);\n\nexport default DispatchContext;\n","import * as d3 from 'd3';\nimport * as moment from 'moment';\n\nimport { defaults } from './defaults';\nimport { log } from '../utils';\n\n// Moment default export\nconst _moment = moment.default;\n\n/**\n * @name parseDataset\n * @description VRIA Dataset parser\n * @author Peter Butcher <pete@pbutcher.uk>\n * @param {object} config - VRIA vis-config file as JSON\n * @returns {object}\n */\nfunction parseDataset(config) {\n  // Get data and views objects from vis-config\n  const { data, views } = config;\n\n  // Only perform dataset transforms on fields used in this vis-config\n  const uniqueFields = new Set();\n  const encodingMap = new Map();\n  views.forEach((view) => {\n    Object.keys(view.encoding).forEach((channel) => {\n      if (!uniqueFields.has(view.encoding[channel].field)) {\n        uniqueFields.add(view.encoding[channel].field);\n        encodingMap.set(view.encoding[channel].field, view.encoding[channel]);\n      }\n    });\n  });\n\n  // Supported dataset file types\n  const SUPPORTED_FILE_TYPES = ['csv', 'json', 'txt', 'text'];\n\n  // Get file type of dataset\n  const FILE_TYPE =\n    typeof data.url === 'string'\n      ? data.url.split('.').pop().toLowerCase()\n      : 'json';\n\n  // Transformed dataset\n  let transformedDataset;\n\n  // Load datasets with d3\n  if (SUPPORTED_FILE_TYPES.includes(FILE_TYPE)) {\n    switch (FILE_TYPE) {\n      case 'txt':\n      case 'text':\n      case 'csv':\n        try {\n          transformedDataset = d3.csv(data.url, (row) =>\n            _transformRow(row, encodingMap)\n          );\n        } catch (err) {\n          log.error(\n            `parseDataset - Error parsing dataset as ${FILE_TYPE}`,\n            err\n          );\n        }\n        break;\n      case 'json':\n      default:\n        try {\n          if (typeof data.url === 'string') {\n            transformedDataset = d3\n              .json(data.url)\n              .then((d) => d.map((row) => _transformRow(row, encodingMap)));\n          } else if (typeof data.values === 'object') {\n            transformedDataset = Promise.resolve(\n              data.values.map((row) => _transformRow(row, encodingMap))\n            );\n          }\n        } catch (err) {\n          log.error('parseDataset - Error parsing dataset as JSON', err);\n        }\n        break;\n    }\n  } else {\n    log.error(\n      `parseDataset - Error parsing dataset. Unsupported file type: ${FILE_TYPE}`\n    );\n  }\n\n  return {\n    dataset: transformedDataset,\n    uniqueFields\n  };\n}\n\n/**\n * @name _transformRow\n * @private\n * @description Perform data transformations on each row of a dataset\n * @author Peter Butcher <pete@pbutcher.uk>\n * @param {object} row - A row of a parsed dataset\n * @param {object} encodingMap - All encodings used in this vis-config\n * @returns {object} A transformed row\n */\nfunction _transformRow(row, encodingMap) {\n  encodingMap.forEach((encoding) => {\n    switch (encoding.type) {\n      // Transform quantitative fields\n      case 'quantitative':\n        if (typeof row[encoding.field] === 'string') {\n          // Parsed as string\n          if (row[encoding.field] === '') {\n            // Set missing data to 0\n            // TODO: Remove, flag or otherwise process missing values somehow?\n            row[encoding.field] = 0;\n          } else {\n            // Ensure radix character is period and not comma (, => .)\n            // Also parse as float...\n            row[encoding.field] = +parseFloat(\n              row[encoding.field].replace(',', '.')\n            );\n          }\n        } else {\n          // Parsed as number...\n          row[encoding.field] = +row[encoding.field];\n        }\n        break;\n      // Transform temporal fields\n      case 'temporal':\n        // Transform date if timeUnit is supplied\n        // TODO: Consider insisting on moment formats rather than Vega-Lite?\n        // TODO: Consider not altering the original dataset?\n        if (encoding.timeUnit) {\n          // Default timeUnits can be set in (grammar/defaults)\n          const { timeUnit: dfTimeUnit } = defaults.view.encoding;\n          const timeUnits = new Map([\n            ['year', dfTimeUnit.year],\n            ['quarter', dfTimeUnit.quarter],\n            ['month', dfTimeUnit.month],\n            ['date', dfTimeUnit.date],\n            ['week', dfTimeUnit.week],\n            ['day', dfTimeUnit.day],\n            ['dayofyear', dfTimeUnit.dayofyear],\n            ['hours', dfTimeUnit.hours],\n            ['minutes', dfTimeUnit.minutes],\n            ['seconds', dfTimeUnit.seconds],\n            ['milliseconds', dfTimeUnit.milliseconds]\n          ]);\n          const timeUnit = timeUnits.get(encoding.timeUnit);\n          row[encoding.field] = _moment(\n            new Date(row[encoding.field].toString())\n          ).format(timeUnit);\n        } else {\n          if (typeof row[encoding.field] !== 'string')\n            row[encoding.field] = row[encoding.field].toString();\n        }\n        break;\n      // Transform nominal fields\n      case 'nominal':\n        if (typeof row[encoding.field] !== 'string')\n          row[encoding.field] = row[encoding.field].toString();\n        break;\n      // Transform ordinal fields\n      case 'ordinal':\n        if (typeof row[encoding.field] !== 'string')\n          row[encoding.field] = row[encoding.field].toString();\n        break;\n      default:\n        break;\n    }\n  });\n  return row;\n}\n\nexport default parseDataset;\n","import Ajv from 'ajv';\n\nimport { log } from '../utils';\nimport schema from './schema';\n\n/**\n * @name validateVisConfig\n * @description VRIA vis-config JSON Schema validator\n * @author Peter Butcher <pete@pbutcher.uk>\n * @param {object} config - VRIA vis-config file as JSON\n */\nfunction validateVisConfig(config) {\n  // config must be an object\n  if (typeof config !== 'object') {\n    log.error(\n      `ValidateVisConfig - Malformed vis-config passed to validator. Expected type: 'object', got '${typeof config}'.`\n    );\n  }\n\n  // Validate vis-config against VRIA JSON Schema\n  // - VRIA JSON Schemas are filed under src/grammar/schema/\n  // - VRIA vis-config validation uses the Ajv JSON Schema Validator.\n  // - Defaults are not applied to nested properties or $refs in Ajv and therefore no defaults should be specified in the schema.\n  // - - This is a noted limitation of Ajv, so defaults for all properties are added after schema validation.\n\n  const ajv = new Ajv({ useDefaults: false, jsonPointers: true });\n  const validate = ajv.compile(schema);\n  const valid = validate(config);\n\n  if (valid) {\n    log.debug(`ValidateVisConfig - vis-config successfully validated`, config);\n  } else {\n    log.error(\n      `ValidateVisConfig - vis-config validation failed`,\n      ajv.errorsText(validate.errors),\n      validate.errors\n    );\n  }\n\n  return valid;\n}\n\nexport default validateVisConfig;\n","import cloneDeep from 'lodash/cloneDeep';\nimport * as d3 from 'd3';\n\nimport validateVisConfig from './validateVisConfig';\nimport parseDataset from './parseDataset';\nimport { defaults } from './defaults';\nimport { log } from '../utils';\n\n/**\n * @name compileVisConfig\n * @description VRIA vis-config compiler\n * @author Peter Butcher <pete@pbutcher.uk>\n * @param {object} config - VRIA vis-config file as JSON\n * @param {boolean} validated - true if the vis-config has already been validated\n * @returns {object} Promise containing compiled vis-config, dataset, scales and encodings\n */\nfunction compileVisConfig(config, additionalFilters = [], validated = false) {\n  // vis-config must be an object\n  if (typeof config !== 'object') {\n    log.error(\n      `compileVisConfig - Malformed vis-config passed to compiler. Expected type: 'object', got '${typeof config}'.`\n    );\n  }\n\n  // Validate config if it has not already been\n  let valid = false;\n  if (validated) {\n    valid = true;\n  } else {\n    try {\n      valid = validateVisConfig(config);\n    } catch (error) {\n      log.error(error);\n      return false;\n    }\n  }\n\n  // This will contain the compiled vis-config\n  let compiledConfig;\n\n  // This will contain the domain of active fields in this vis-config\n  const domainMap = new Map();\n\n  // The original vis-config must pass validation before it can be compiled\n  if (valid) {\n    // The remainder of this function creates a complete VRIA vis-config\n    // Missing values are inferred from defaults (grammar/defaults), the dataset\n    // and the vis-config itself.\n\n    // Views (config.views)\n    // - If a view does not exist, create one and move properties inside\n    if (config.views === undefined) {\n      compiledConfig = {\n        data: cloneDeep(config.data),\n        title: config.title,\n        views: [cloneDeep(config)]\n      };\n      delete compiledConfig.views[0].data;\n    } else {\n      // If views object exists, clone the original config\n      compiledConfig = cloneDeep(config);\n    }\n\n    // Parse dataset\n    // - The dataset is parsed after the vis-config views are normalised\n    // - Parsing includes loading the dataset and returning a Set() of unique fields\n    // - Once parsed, defaults can be inferred\n    const { dataset } = parseDataset(compiledConfig);\n    return dataset.then((d) => {\n      // Resulting domains, ranges and scales\n      const allScales = [];\n\n      // Infer defaults for each view\n      compiledConfig.views.forEach((view, i) => {\n        // --------------------\n        // Top level view properties\n        // - Copy over top level properties and assign defaults\n        ['x', 'y', 'z', 'width', 'height', 'depth', 'titlePadding'].forEach(\n          (el) => {\n            if (view[el] === undefined) {\n              compiledConfig.views[i][el] = defaults.view[el];\n            }\n          }\n        );\n\n        // Top level shorthand view properties\n        // - Replace shorthands with full property names\n        [\n          ['xrot', 'xrotation'],\n          ['yrot', 'yrotation'],\n          ['zrot', 'zrotation']\n        ].forEach((el) => {\n          if (view[el[0]] !== undefined) {\n            compiledConfig.views[i][el[1]] = cloneDeep(view[el[0]]);\n            delete compiledConfig.views[i][el[0]];\n          } else if (view[el[0]] === undefined && view[el[1]] === undefined) {\n            compiledConfig.views[i][el[1]] = defaults.view[el[1]];\n          }\n        });\n\n        // --------------------\n        // Mark (views[].mark)\n        // - Get the mark type from mark object or string\n        // - VRIA currently supports 2 mark types: bar and point\n        // - These types are assigned shape primitives\n\n        // Mark Type (views[].mark | views[].mark.type)\n        const markType = view.mark.type ?? view.mark;\n\n        // Mark Shape (views[].mark.shape)\n        // - Default shapes are based on the mark type\n        let markShape;\n        switch (markType) {\n          case 'bar':\n            markShape = view.mark.shape ?? defaults.view.mark.bar.shape;\n            break;\n          case 'point':\n          default:\n            markShape = view.mark.shape ?? defaults.view.mark.point.shape;\n            break;\n        }\n\n        // Mark Tooltip (views[].mark.tooltip)\n        // - Set the mark tooltip\n        let markTooltip;\n        if (typeof view.mark.tooltip === 'object') {\n          markTooltip = view.mark.tooltip;\n        } else if (view.mark.tooltip === true) {\n          markTooltip = defaults.view.mark.tooltip.on;\n        } else {\n          markTooltip = false;\n        }\n\n        // Replace existing mark config with compiled mark object\n        compiledConfig.views[i].mark = {\n          type: markType,\n          shape: markShape,\n          tooltip: markTooltip\n        };\n\n        // --------------------\n        // Encoding (views[].encoding[channel])\n        // - View encoding channels\n        // - NOTE: timeUnit and numberFormat are optional and are not compiled\n\n        // --------------------\n        // Scale range (views[].encoding[channel].scale.range)\n        // - Get the range from each encoding channel\n        const ranges = _getRanges(compiledConfig.views[i], d);\n\n        // Add channel properties\n        Object.keys(view.encoding).forEach((el) => {\n          // Add scale object if one does not exist\n          if (view.encoding[el].scale === undefined) {\n            compiledConfig.views[i].encoding[el].scale = {};\n          }\n\n          // Only add range if this encoding channel is not a constant\n          if (view.encoding[el].value === undefined) {\n            // Add range\n            compiledConfig.views[i].encoding[el].scale.range = ranges[el];\n          }\n\n          // --------------------\n          // Scheme (views[].encoding[channel].scale.scheme)\n          // - If this is a colour scale, it should have a scheme\n          // - The scheme contains a named scale range or an array of colours\n          if (el === 'color') {\n            // If a scheme is provided, validate it\n            if (\n              view.encoding[el].scale.scheme === 'string' &&\n              d3[view.encoding[el].scale.scheme] === undefined\n            ) {\n              log.error(\n                `compileVisConfig - Invalid scheme: ${view.encoding[el].scale.scheme} - VRIA accepts schemes from d3-scale-chromatic: https://github.com/d3/d3-scale-chromatic, or an array of colours`\n              );\n            }\n\n            // If the range is a string, it is a colour scale, do a lookup\n            // If the range is a string but the scheme is already set, ignore range\n            if (\n              typeof view.encoding[el].scale.range === 'string' &&\n              view.encoding[el].scale.scheme === undefined\n            ) {\n              compiledConfig.views[i].encoding[el].scale.scheme =\n                defaults.view.encoding.scale.scheme[\n                  defaults.view.encoding.scale.range.color[\n                    view.encoding[el].type\n                  ]\n                ];\n            }\n          }\n\n          // --------------------\n          // Nice (views[].encoding[channel].scale.nice)\n          // - Nice the scale, never nice non-quantitative scales\n          if (\n            view.encoding[el].type === 'quantitative' &&\n            view.encoding[el].scale.nice === undefined\n          ) {\n            compiledConfig.views[i].encoding[el].scale.nice =\n              defaults.view.encoding.scale.nice;\n          }\n\n          // --------------------\n          // Zero (views[].encoding[channel].scale.zero)\n          // - Scale starts from zero, never zero non-quantitative scales\n          if (\n            view.encoding[el].type === 'quantitative' &&\n            view.encoding[el].scale.zero === undefined\n          ) {\n            compiledConfig.views[i].encoding[el].scale.zero =\n              defaults.view.encoding.scale.zero;\n          }\n\n          // Scale padding (only x, y, or z and non-quantitative fields)\n          if (\n            ['x', 'y', 'z'].includes(el) &&\n            view.encoding[el].type !== 'quantitative'\n          ) {\n            // --------------------\n            // Padding inner (views[].encoding[channel].scale.paddingInner)\n            // - Sets padding inner to band scales\n            if (view.encoding[el].scale.paddingInner === undefined) {\n              compiledConfig.views[i].encoding[el].scale.paddingInner =\n                defaults.view.encoding.scale.paddingInner;\n            }\n            // --------------------\n            // Padding outer (views[].encoding[channel].scale.paddingOuter)\n            // - Sets padding outer to band scales, sets padding to point scales\n            if (view.encoding[el].scale.paddingOuter === undefined) {\n              compiledConfig.views[i].encoding[el].scale.paddingOuter =\n                defaults.view.encoding.scale.paddingOuter;\n            }\n          }\n\n          // --------------------\n          // Axis (views[].encoding[channel].axis)\n          // - Set axis properties\n\n          // Only applies to x, y and z channels\n          // TODO: Instead of using if statements, use object spread instead?\n          if (\n            ['x', 'y', 'z'].includes(el) &&\n            view.encoding[el]?.axis !== false\n          ) {\n            // Add axis object if one does not exist\n            if (view.encoding[el].axis === undefined) {\n              compiledConfig.views[i].encoding[el].axis = {};\n            }\n\n            // --------------------\n            // Axis title (views[].encoding[channel].axis.title)\n            // - Set axis title to field name if not specified\n            if (view.encoding[el].axis.title === undefined) {\n              compiledConfig.views[i].encoding[el].axis.title =\n                view.encoding[el].field;\n            }\n\n            // --------------------\n            // Axis title padding (views[].encoding[channel].axis.titlePadding)\n            // - Set axis title padding if not specified\n            if (view.encoding[el].axis.titlePadding === undefined) {\n              compiledConfig.views[i].encoding[el].axis.titlePadding =\n                defaults.view.encoding.axis.titlePadding;\n            }\n\n            // --------------------\n            // Axis filter (views[].encoding[channel].axis.filter)\n            // - Set axis filter on or off\n            if (view.encoding[el].axis.filter === undefined) {\n              compiledConfig.views[i].encoding[el].axis.filter =\n                defaults.view.encoding.axis.filter;\n            }\n\n            // --------------------\n            // Axis face (views[].encoding[channel].axis.face)\n            // - Set axis face\n            if (view.encoding[el].axis.face === undefined) {\n              compiledConfig.views[i].encoding[el].axis.face =\n                defaults.view.encoding.axis.face[el];\n            }\n\n            // --------------------\n            // Axis orient (views[].encoding[channel].axis.orient)\n            // - Set axis orient\n            if (view.encoding[el].axis.orient === undefined) {\n              compiledConfig.views[i].encoding[el].axis.orient =\n                defaults.view.encoding.axis.orient[el];\n            }\n\n            // --------------------\n            // Axis ticks (views[].encoding[channel].axis.ticks)\n            // - Set axis tick visibility\n            if (view.encoding[el].axis.ticks === undefined) {\n              compiledConfig.views[i].encoding[el].axis.ticks =\n                defaults.view.encoding.axis.ticks;\n            }\n\n            // --------------------\n            // Axis tick count (views[].encoding[channel].axis.tickCount)\n            // - Set axis tick count\n            if (view.encoding[el].axis.tickCount === undefined) {\n              compiledConfig.views[i].encoding[el].axis.tickCount =\n                defaults.view.encoding.axis.tickCount;\n            }\n\n            // --------------------\n            // Axis labels (views[].encoding[channel].axis.labels)\n            // - Set axis label visability\n            if (view.encoding[el].axis.labels === undefined) {\n              compiledConfig.views[i].encoding[el].axis.labels =\n                defaults.view.encoding.axis.labels;\n            }\n          }\n\n          // --------------------\n          // Legend (views[].encoding[channel].legend)\n          // - Set legend properties\n          // - By default, legends are added\n\n          // TODO: Instead of using if statements, use object spread instead?\n          if (\n            [\n              'width',\n              'height',\n              'depth',\n              'xoffset',\n              'yoffset',\n              'zoffset',\n              'xrotation',\n              'yrotation',\n              'zrotation',\n              'size',\n              'color',\n              'opacity',\n              'length',\n              'shape'\n            ].includes(el) &&\n            view.encoding[el].legend !== false &&\n            view.encoding[el].value === undefined\n          ) {\n            // Add axis object if one does not exist or is set to true\n            if (\n              view.encoding[el].legend === undefined ||\n              view.encoding[el].legend === true\n            ) {\n              compiledConfig.views[i].encoding[el].legend = {};\n            }\n\n            // --------------------\n            // Legend title (views[].encoding[channel].legend.title)\n            // - Set legend title to field name if not specified\n            if (view.encoding[el].legend === undefined) {\n              compiledConfig.views[i].encoding[el].legend =\n                view.encoding[el].field;\n            }\n\n            // --------------------\n            // Legend filter (views[].encoding[channel].legend.filter)\n            // - Set legend filter on or off\n            if (view.encoding[el].legend.filter === undefined) {\n              compiledConfig.views[i].encoding[el].legend.filter =\n                defaults.view.encoding.legend.filter;\n            }\n\n            // --------------------\n            // Legend face (views[].encoding[channel].legend.face)\n            // - Set legend face\n            if (view.encoding[el].legend.face === undefined) {\n              if (view.encoding[el].type === 'quantitative' && el === 'color') {\n                compiledConfig.views[i].encoding[el].legend.face =\n                  defaults.view.encoding.legend.type.gradient.face;\n              } else {\n                compiledConfig.views[i].encoding[el].legend.face =\n                  defaults.view.encoding.legend.type.symbol.face;\n              }\n            }\n\n            // --------------------\n            // Legend orient (views[].encoding[channel].legend.orient)\n            // - Set legend orient\n            if (view.encoding[el].legend.orient === undefined) {\n              if (view.encoding[el].type === 'quantitative' && el === 'color') {\n                compiledConfig.views[i].encoding[el].legend.orient =\n                  defaults.view.encoding.legend.type.gradient.orient;\n              } else {\n                compiledConfig.views[i].encoding[el].legend.orient =\n                  defaults.view.encoding.legend.type.symbol.orient;\n              }\n            }\n\n            // --------------------\n            // Legend ticks (views[].encoding[channel].legend.ticks)\n            // - Set legend tick visibility\n            if (view.encoding[el].legend.ticks === undefined) {\n              compiledConfig.views[i].encoding[el].legend.ticks =\n                defaults.view.encoding.legend.ticks;\n            }\n\n            // --------------------\n            // Legend tick count (views[].encoding[channel].legend.tickCount)\n            // - Set legend tick count\n            if (view.encoding[el].legend.tickCount === undefined) {\n              compiledConfig.views[i].encoding[el].legend.tickCount =\n                defaults.view.encoding.legend.tickCount;\n            }\n\n            // --------------------\n            // Legend x position\n            // - Set legend x position\n            if (view.encoding[el].legend.x === undefined) {\n              compiledConfig.views[i].encoding[el].legend.x =\n                defaults.view.encoding.legend.x;\n            }\n\n            // --------------------\n            // Legend y position\n            // - Set legend y position\n            if (view.encoding[el].legend.y === undefined) {\n              compiledConfig.views[i].encoding[el].legend.y =\n                defaults.view.encoding.legend.y;\n            }\n\n            // --------------------\n            // Legend z position\n            // - Set legend z position\n            if (view.encoding[el].legend.z === undefined) {\n              compiledConfig.views[i].encoding[el].legend.z =\n                defaults.view.encoding.legend.z;\n            }\n\n            // --------------------\n            // Legend x rotation\n            // - Set legend x rotation\n            if (view.encoding[el].legend.xrotation === undefined) {\n              compiledConfig.views[i].encoding[el].legend.xrotation =\n                defaults.view.encoding.legend.xrotation;\n            }\n\n            // --------------------\n            // Legend y rotation\n            // - Set legend y rotation\n            if (view.encoding[el].legend.yrotation === undefined) {\n              compiledConfig.views[i].encoding[el].legend.yrotation =\n                defaults.view.encoding.legend.yrotation;\n            }\n\n            // --------------------\n            // Legend z rotation\n            // - Set legend z rotation\n            if (view.encoding[el].legend.zrotation === undefined) {\n              compiledConfig.views[i].encoding[el].legend.zrotation =\n                defaults.view.encoding.legend.zrotation;\n            }\n          }\n        });\n\n        // --------------------\n        // Scale domain (views[].encoding[channel].scale.domain)\n        // - Get the domain from each encoding channel in this view\n        // - This function also returns a Map() of field:domain for filtering and API use\n        const { domains } = _getDomains(compiledConfig.views[i], d);\n\n        // Scales\n        // - Using domains and ranges to produce scale functions\n        // - These scale functions are for mapping data and are not added to the config\n        const scales = _getScales(compiledConfig.views[i], domains, ranges);\n        allScales.push(scales);\n\n        // Add domain to compiled config\n        // This also stores the domain of each field used in this view in a Map()\n        // This is necessary because some domains will have been niced or zeroed\n        Object.keys(view.encoding).forEach((el) => {\n          // If this encoding has a field (excluding constant channels)\n          if (view.encoding[el].value === undefined) {\n            // Add domain to compiled config\n            // compiledConfig.views[i].encoding[el].scale.domain = domains[el];\n            compiledConfig.views[i].encoding[el].scale.domain = allScales[i][\n              el\n            ].domain();\n            // Add domain to domain map\n            domainMap.set(view.encoding[el].field, allScales[i][el].domain());\n          }\n        });\n      });\n\n      // Set additional filters to domain map\n      if (additionalFilters) {\n        additionalFilters.forEach((f) => {\n          const values = d.map((row) => row[f.field]);\n          domainMap.set(\n            f.field,\n            f.domain ||\n              (f.type === 'quantitative'\n                ? f.zero\n                  ? [0, d3.max(values)]\n                  : d3.extent(values)\n                : [...new Set(values)])\n          );\n        });\n      }\n\n      return {\n        dataset: d,\n        compiledConfig,\n        domainMap,\n        scales: allScales\n      };\n    });\n  }\n}\n\n/**\n * @name _getDomains\n * @private\n * @description Get the domains of each encoding channel in a view\n * @author Peter Butcher <pete@pbutcher.uk>\n * @param {object} view - Set domains for each encoding channel in this view\n * @param {object} dataset - Dataset from which to retrieve domains\n * @returns {object} Domains\n */\nfunction _getDomains(view, dataset) {\n  const { encoding } = view;\n  const domains = {};\n  const domainsWithFields = {};\n  const channelFields = {};\n  Object.keys(encoding).forEach((channel) => {\n    // This channel's domain;\n    let domain;\n    // If a domain is specified in the vis-config\n    if (encoding[channel].scale?.domain) {\n      domain = encoding[channel].scale.domain;\n    } else if (encoding[channel]?.value) {\n      domain = encoding[channel]?.value;\n    } else {\n      const values = dataset.map((row) => row[encoding[channel].field]);\n      switch (encoding[channel].type) {\n        case 'quantitative':\n          // Should the domain start from zero?\n          if (encoding[channel].scale?.zero === true) {\n            domain = [0, d3.max(values)];\n          } else {\n            domain = d3.extent(values);\n          }\n          break;\n        case 'temporal':\n        case 'nominal':\n        case 'ordinal':\n        default:\n          domain = [...new Set(values)];\n          break;\n      }\n    }\n    domains[channel] = domain;\n    domainsWithFields[encoding[channel].field] = domain;\n    channelFields[channel] = encoding[channel].field;\n  });\n  return { domains, domainsWithFields, channelFields };\n}\n\n/**\n * @name _getRanges\n * @private\n * @description Get the ranges of each encoding channel in a view\n * @author Peter Butcher <pete@pbutcher.uk>\n * @param {object} view - Set range for each encoding channel in this view\n * @returns {object} Ranges\n */\nfunction _getRanges(view) {\n  const { encoding } = view;\n  const ranges = {};\n  Object.keys(encoding).forEach((channel) => {\n    // This channel's range\n    let range;\n    // If a range is specified in the vis-config\n    if (encoding[channel].scale?.range) {\n      // Use this range\n      range = encoding[channel].scale.range;\n    } else {\n      // If the range is not specified, do a lookup\n      switch (channel) {\n        case 'x':\n        case 'width':\n          range = [0, view.width];\n          break;\n        case 'y':\n        case 'height':\n          range = [0, view.height];\n          break;\n        case 'z':\n        case 'depth':\n          range = [0, view.depth];\n          break;\n        case 'size':\n          range = defaults.view.encoding.scale.range.size;\n          break;\n        case 'opacity':\n          range = [0, 1];\n          break;\n        case 'length':\n          range = defaults.view.encoding.scale.range.length;\n          break;\n        case 'color':\n          range =\n            defaults.view.encoding.scale.range.color[encoding[channel].type];\n          break;\n        case 'shape':\n          range = defaults.view.encoding.scale.range.shape;\n          break;\n        case 'xrotation':\n        case 'yrotation':\n        case 'zrotation':\n          range = defaults.view.encoding.scale.range.rotation;\n          break;\n        case 'xoffset':\n        case 'yoffset':\n        case 'zoffset':\n          range = defaults.view.encoding.scale.range.offset;\n          break;\n        default:\n          break;\n      }\n    }\n    ranges[channel] = range;\n  });\n  return ranges;\n}\n\n/**\n * @name _getScales\n * @private\n * @description Generate scale functions of each encoding channel in each view\n * @author Peter Butcher <pete@pbutcher.uk>\n * @param {object} view - Generate scale functions for encoding channels in this view\n * @param {object} domains - Data domaisn\n * @param {object} ranges - Data ranges\n * @returns {object} Scales\n */\nfunction _getScales(view, domains, ranges) {\n  const { encoding } = view;\n  const scales = {};\n  Object.keys(encoding).forEach((channel) => {\n    // This channel's scale\n    let scale;\n    // Create scales for each channel based on encoding type\n    if (encoding[channel].value) {\n      scale = () => encoding[channel].value;\n    } else {\n      switch (encoding[channel].type) {\n        case 'quantitative':\n          switch (channel) {\n            case 'color':\n              // If a scheme is defined, use that scheme\n              if (encoding[channel]?.scale?.scheme !== undefined) {\n                if (typeof encoding[channel].scale?.scheme === 'string') {\n                  // Scheme is a string\n                  scale = d3\n                    .scaleSequential()\n                    .domain(domains[channel])\n                    .interpolator(d3[encoding[channel].scale?.scheme]);\n                } else {\n                  // Scheme is an array\n                  scale = d3\n                    .scaleLinear()\n                    .domain(domains[channel])\n                    .range(encoding[channel].scale?.scheme);\n                }\n              }\n              break;\n            default:\n              // Default scale\n              scale = d3\n                .scaleLinear()\n                .domain(domains[channel])\n                .range(ranges[channel]);\n              break;\n          }\n          break;\n        case 'temporal':\n        case 'nominal':\n        case 'ordinal':\n        default: {\n          // Set padding inner and outer from config or defaults\n          // Padding outer acts as padding for scalePoint\n          const paddingInner = encoding[channel].scale.paddingInner;\n          const paddingOuter = encoding[channel].scale.paddingOuter;\n\n          switch (channel) {\n            case 'x':\n            case 'y':\n            case 'z':\n              switch (view.mark.type) {\n                case 'bar':\n                  scale = d3\n                    .scaleBand()\n                    .domain(domains[channel])\n                    .paddingInner(paddingInner)\n                    .paddingOuter(paddingOuter)\n                    .range(ranges[channel]);\n                  break;\n                case 'point':\n                  scale = d3\n                    .scalePoint()\n                    .domain(domains[channel])\n                    .padding(paddingOuter)\n                    .range(ranges[channel]);\n                  break;\n                default:\n                  break;\n              }\n              break;\n            case 'color':\n              if (encoding[channel].scale?.scheme !== undefined) {\n                if (typeof encoding[channel].scale?.scheme === 'string') {\n                  // Scheme is a string\n                  scale = d3\n                    .scaleOrdinal()\n                    .domain(domains[channel])\n                    .range(d3[encoding[channel].scale?.scheme]);\n                } else {\n                  // Scheme is an array\n                  scale = d3\n                    .scaleOrdinal()\n                    .domain(domains[channel])\n                    .range(encoding[channel].scale?.scheme);\n                }\n              }\n              break;\n            case 'shape':\n              scale = d3\n                .scaleOrdinal()\n                .domain(domains[channel])\n                .range(encoding[channel].scale.range);\n              break;\n            default:\n              scale = d3\n                .scaleOrdinal()\n                .domain(domains[channel])\n                .range(ranges[channel]);\n              break;\n          }\n          break;\n        }\n      }\n    }\n\n    // Nice the scale\n    if (encoding[channel].scale?.nice === true) {\n      scale = scale.nice();\n    }\n\n    scales[channel] = scale;\n  });\n  return scales;\n}\n\nexport default compileVisConfig;\n","import React from 'react';\nimport { Entity } from 'aframe-react';\nimport * as d3 from 'd3';\n\nconst GradientLegend = ({\n  options,\n  channel,\n  scales,\n  color,\n  legendTitle,\n  posrot\n}) => {\n  if (channel !== 'color') return null;\n\n  const { xpos, ypos, zpos, xrot, yrot, zrot } = posrot;\n\n  const background = (\n    <Entity\n      primitive='a-plane'\n      width='0.3'\n      height='0.2'\n      color={options.chartColor}\n      opacity='0.2'\n      position='0 0 0'\n    />\n  );\n\n  let minValue = scales.color.domain()[0];\n  if (color.numberFormat !== undefined)\n    minValue = d3.format(color.numberFormat)(minValue);\n\n  const min = (\n    <Entity\n      primitive='a-text'\n      width='0.5'\n      value={minValue}\n      color={options.chartColor}\n      side='front'\n      anchor='align'\n      align='left'\n      position='-0.125 0.01 0.002'\n    />\n  );\n\n  let maxValue = scales.color.domain()[1];\n  if (color.numberFormat !== undefined)\n    maxValue = d3.format(color.numberFormat)(maxValue);\n\n  const max = (\n    <Entity\n      primitive='a-text'\n      width='0.5'\n      value={maxValue}\n      color={options.chartColor}\n      side='front'\n      anchor='align'\n      align='right'\n      position='0.125 0.01 0.002'\n    />\n  );\n\n  const label = (\n    <Entity\n      primitive='a-text'\n      width='0.5'\n      value={legendTitle}\n      color={options.chartColor}\n      side='front'\n      anchor='align'\n      align='center'\n      position='0 0.06 0.002'\n    />\n  );\n\n  const gradient = [];\n\n  let scheme;\n\n  if (typeof color?.scale?.scheme === 'string') {\n    scheme = d3\n      .scaleSequential()\n      .domain([0, 1])\n      .interpolator(d3[color.scale.scheme]);\n  } else {\n    scheme = d3.scaleLinear().domain([0, 1]).range(color.scale.scheme);\n  }\n\n  for (var i = 0; i < 50; i++) {\n    gradient.push(\n      <Entity\n        key={`gradient${i}`}\n        primitive='a-plane'\n        width='0.005'\n        height='0.05'\n        color={scheme(i / 50)}\n        position={`${-0.12 + 0.005 * i} -0.04 0.001`}\n      />\n    );\n  }\n\n  return (\n    <Entity\n      rotation={{ x: xrot, y: yrot, z: zrot }}\n      position={{ x: xpos, y: ypos, z: zpos }}\n      className='legend'>\n      {background}\n      {label}\n      {min}\n      {max}\n      {gradient}\n    </Entity>\n  );\n};\n\nexport default GradientLegend;\n","import React, { useContext } from 'react';\nimport { Entity } from 'aframe-react';\nimport * as d3 from 'd3';\n\nimport { DispatchContext } from '../../../reducer';\nimport { actionTypes } from '../../../actions';\n\nconst SymbolLegend = ({\n  view,\n  channel,\n  domainMap,\n  customMarks,\n  options,\n  legendTitle,\n  scales,\n  posrot\n}) => {\n  if (view.encoding.color && view.encoding.shape) {\n    if (view.encoding.color.field === view.encoding.shape.field) {\n      if (channel !== 'color') return null;\n    }\n  }\n\n  const dispatch = useContext(DispatchContext);\n  const { xpos, ypos, zpos, xrot, yrot, zrot } = posrot;\n\n  const legendWidth = 0.25;\n  const legendHeight = 0.09 + scales[channel].domain().length * 0.04;\n  const legendYPos = legendHeight / 2 - 0.05;\n\n  const labels = scales[channel].domain().map((v, i) => {\n    let opacity = 1;\n    let isChecked = true;\n    const color = scales.color ? scales.color(v) : d3.schemeCategory10[0];\n    const shape = scales.shape ? scales.shape(v) : view.mark.shape;\n    const topOffset = 0.015 + legendYPos - 0.055;\n    const step = i * -0.04;\n\n    if (\n      domainMap.get(view.encoding[channel].field) &&\n      !domainMap\n        .get(view.encoding[channel].field)\n        .includes(scales[channel].domain()[i])\n    ) {\n      opacity = 0.5;\n      isChecked = false;\n    }\n\n    const checked = (\n      <Entity>\n        <Entity\n          primitive='a-plane'\n          width='0.004'\n          height='0.01'\n          color='#333333'\n          position={{\n            x: -0.0864,\n            y: topOffset - 0.003 + step,\n            z: 0.002\n          }}\n          rotation='0 0 45'\n        />\n        <Entity\n          primitive='a-plane'\n          width='0.004'\n          height='0.02'\n          color='#333333'\n          position={{\n            x: -0.078,\n            y: topOffset + step,\n            z: 0.002\n          }}\n          rotation='0 0 -45'\n        />\n      </Entity>\n    );\n\n    const checkbox = (\n      <Entity>\n        {isChecked ? checked : null}\n        <Entity\n          className='interactive'\n          primitive='a-plane'\n          width='0.025'\n          height='0.025'\n          color='#FFFFFF'\n          opacity='1'\n          position={{\n            x: -0.08,\n            y: topOffset + step,\n            z: 0.001\n          }}\n          events={{\n            mouseenter: (e) => {\n              e.target.setAttribute('opacity', 0.5);\n            },\n            mouseleave: (e) => {\n              e.target.setAttribute('opacity', 1);\n            },\n            click: (e) => {\n              if (e.detail !== 0) {\n                dispatch({\n                  type: actionTypes.FILTER_DATA,\n                  payload: {\n                    value: scales[channel].domain()[i],\n                    field: view.encoding[channel].field,\n                    bound: null,\n                    type: 'legend'\n                  }\n                });\n              }\n            }\n          }}\n        />\n      </Entity>\n    );\n\n    let mark;\n\n    switch (shape) {\n      case 'box': {\n        mark = (\n          <Entity\n            primitive='a-plane'\n            width='0.025'\n            height='0.025'\n            color={color}\n            position={{\n              x:\n                view.encoding[channel].legend?.filter !== false ? -0.04 : -0.08,\n              y: topOffset + step,\n              z: 0.001\n            }}\n            opacity={opacity}\n          />\n        );\n\n        break;\n      }\n      case 'sphere':\n        mark = (\n          <Entity\n            radius='0.0125'\n            primitive='a-circle'\n            color={color}\n            position={{\n              x:\n                view.encoding[channel].legend?.filter !== false ? -0.04 : -0.08,\n              y: topOffset + step,\n              z: 0.001\n            }}\n          />\n        );\n        break;\n      case 'cone':\n        mark = (\n          <Entity\n            primitive='a-cone'\n            height='0.02'\n            radius-top='0'\n            radius-bottom='0.01'\n            color={color}\n            position={{\n              x:\n                view.encoding[channel].legend?.filter !== false ? -0.04 : -0.08,\n              y: topOffset + step,\n              z: 0.001\n            }}\n          />\n        );\n        break;\n      case 'tetrahedron':\n        mark = (\n          <Entity\n            primitive='a-triangle'\n            scale='0.025 0.025 0.025'\n            color={color}\n            position={{\n              x:\n                view.encoding[channel].legend?.filter !== false ? -0.04 : -0.08,\n              y: topOffset + step,\n              z: 0.001\n            }}\n          />\n        );\n        break;\n      case 'torus':\n        mark = (\n          <Entity\n            primitive='a-torus'\n            radius='0.01'\n            radius-tubular='0.001'\n            segments-radial='18'\n            segments-tubular='16'\n            color={color}\n            position={{\n              x:\n                view.encoding[channel].legend?.filter !== false ? -0.04 : -0.08,\n              y: topOffset + step,\n              z: 0.001\n            }}\n          />\n        );\n        break;\n      case 'cylinder':\n        mark = (\n          <Entity\n            radius={0.01}\n            primitive='a-circle'\n            color={color}\n            position={{\n              x:\n                view.encoding[channel].legend?.filter !== false ? -0.04 : -0.08,\n              y: topOffset + step,\n              z: 0.001\n            }}\n          />\n        );\n        break;\n      default:\n        mark = (\n          <Entity\n            width='0.025'\n            height='0.025'\n            depth='0.025'\n            position={{\n              x:\n                view.encoding[channel].legend?.filter !== false ? -0.04 : -0.08,\n              y: topOffset + step,\n              z: 0.001\n            }}>\n            {customMarks[view.mark.shape]({\n              width: 0.025,\n              height: 0.025,\n              depth: 0.025,\n              size: 0.025,\n              radius: 0.0125,\n              color\n            })}\n          </Entity>\n        );\n        break;\n    }\n\n    return (\n      <Entity key={`lC${i}`}>\n        {mark}\n        {view.encoding[channel].legend?.filter !== false ? checkbox : null}\n        <Entity\n          primitive='a-text'\n          width='0.5'\n          value={scales[channel].domain()[i]}\n          color={options.chartColor}\n          side='front'\n          anchor='align'\n          align='left'\n          opacity={opacity}\n          position={{\n            x: view.encoding[channel].legend?.filter !== false ? -0.02 : -0.06,\n            y: topOffset + step,\n            z: 0.001\n          }}\n        />\n      </Entity>\n    );\n  });\n\n  return (\n    <Entity\n      primitive='a-plane'\n      width={legendWidth}\n      height={legendHeight}\n      color={options.chartColor}\n      opacity='0.2'\n      rotation={{ x: xrot, y: yrot, z: zrot }}\n      position={{ x: xpos, y: ypos, z: zpos }}>\n      <Entity\n        primitive='a-text'\n        width='0.5'\n        value={`${legendTitle}`}\n        color={options.chartColor}\n        side='front'\n        anchor='align'\n        align='left'\n        position={`-0.09 ${legendYPos + 0.01} 0.001`}\n      />\n      {labels}\n    </Entity>\n  );\n};\n\nexport default SymbolLegend;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Entity } from 'aframe-react';\n\nimport { log } from '../../../utils';\n\nimport GradientLegend from './GradientLegend';\nimport SymbolLegend from './SymbolLegend';\n\nconst Legend = (props) => {\n  log.debug('Legend Rendering');\n  const {\n    view,\n    channel,\n    index,\n    options,\n    scales,\n    domainMap,\n    customMarks,\n    rangesMax\n  } = props;\n\n  // Channel encoding\n  const c = view.encoding[channel];\n\n  // Position\n  let xpos = c.legend.x || 0;\n  let ypos = c.legend.y || 0;\n  let zpos = c.legend.z || 0;\n\n  // Rotation\n  const xrot = c.legend.xrot || c.legend.xrotation || 0;\n  const yrot = c.legend.yrot || c.legend.yrotation || 0;\n  const zrot = c.legend.zrot || c.legend.zrotation || 0;\n\n  // Face and orientation\n  const { face, orient } = c.legend;\n\n  // Offsets\n  const xoffsetLeft = 0.2 + (view.encoding?.x?.axis?.titlePadding || 0);\n  const xoffsetRight = 0.2;\n\n  // Face and orient\n  switch (face) {\n    case 'front':\n      zpos += rangesMax.z;\n    // eslint-disable-next-line no-fallthrough\n    case 'back':\n      if (orient === 'bottom-left') {\n        xpos -= xoffsetLeft;\n      }\n      if (orient === 'left') {\n        ypos += rangesMax.y / 2;\n        xpos -= xoffsetLeft;\n      }\n      if (orient === 'top-left') {\n        ypos += rangesMax.y;\n        xpos -= xoffsetLeft;\n      }\n      if (orient === 'top') {\n        ypos += rangesMax.y;\n        xpos += rangesMax.x / 2;\n      }\n      if (orient === 'top-right') {\n        ypos += rangesMax.y;\n        xpos += rangesMax.x + xoffsetRight;\n      }\n      if (orient === 'right') {\n        ypos += rangesMax.y / 2;\n        xpos += rangesMax.x + xoffsetRight;\n      }\n      if (orient === 'bottom-right') {\n        xpos += rangesMax.x + xoffsetRight;\n      }\n      if (orient === 'bottom') {\n        xpos += rangesMax.x / 2;\n      }\n      if (orient === 'middle') {\n        xpos += rangesMax.x / 2;\n        ypos += rangesMax.y / 2;\n      }\n      break;\n    case 'left':\n      break;\n    case 'right':\n      break;\n    default:\n      break;\n  }\n\n  // Pos Rot\n  const posrot = { xpos, ypos, zpos, xrot, yrot, zrot };\n\n  // Title\n  const legendTitle = c.legend?.title || c.field;\n\n  // Return legend type\n  return c.type === 'quantitative' ? (\n    <GradientLegend\n      options={options}\n      scales={scales}\n      color={c}\n      legendTitle={legendTitle}\n      posrot={posrot}\n      channel={channel}\n    />\n  ) : (\n    <SymbolLegend\n      view={view}\n      domainMap={domainMap}\n      customMarks={customMarks}\n      options={options}\n      legendTitle={legendTitle}\n      scales={scales}\n      posrot={posrot}\n      channel={channel}\n    />\n  );\n\n  // return <Entity rotation='0 0 0'>{generateLegend()}</Entity>;\n};\n\nLegend.propTypes = {\n  view: PropTypes.object.isRequired,\n  options: PropTypes.object.isRequired,\n  dataset: PropTypes.array.isRequired,\n  scales: PropTypes.object.isRequired,\n  domainMap: PropTypes.object.isRequired\n};\n\nexport default React.memo(\n  Legend,\n  (prev, next) => prev.domainMap === next.domainMap\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Entity } from 'aframe-react';\nimport * as d3 from 'd3';\n\nimport { defaults } from '../../../grammar/defaults';\n\nconst Axis = (props) => {\n  const AxisLine = () => (\n    <Entity\n      opacity={props.opacity}\n      line={{\n        start: props.start,\n        end: props.end,\n        color: props.color\n      }}\n    />\n  );\n\n  return (\n    <Entity position={props.position}>\n      <AxisLine />\n      {props.ticks}\n      {props.tickText}\n      {props.title}\n    </Entity>\n  );\n};\n\nAxis.propTypes = {\n  start: PropTypes.string.isRequired,\n  end: PropTypes.string.isRequired,\n  color: PropTypes.string.isRequired,\n  position: PropTypes.string,\n  rotation: PropTypes.string\n};\n\nexport const XAxis = (props) => {\n  const {\n    scales,\n    tickOffset,\n    color,\n    tickValues,\n    rangesMax,\n    numberFormat,\n    title,\n    titlePadding,\n    labels,\n    ticks\n  } = props;\n\n  const axisTicks = () =>\n    tickValues.map((tick, i) => (\n      <Entity\n        key={`xTicks${i}`}\n        line={{\n          start: `${scales.x(tick) + tickOffset} 0 ${rangesMax.z}`,\n          end: `${scales.x(tick) + tickOffset} -0.025 ${rangesMax.z}`,\n          color: color\n        }}\n      />\n    ));\n\n  const axisTickText = () =>\n    tickValues.map((tick, i) => {\n      let value = tick;\n      if (typeof value === 'number' && typeof numberFormat === 'string') {\n        value = d3.format(numberFormat)(tick);\n      }\n\n      return (\n        <Entity\n          key={`xTickText${i}`}\n          text={{\n            width: 0.6,\n            value: value,\n            color: color,\n            side: 'front',\n            anchor: 'align',\n            align: 'right'\n          }}\n          position={`${scales.x(tick) + tickOffset} -0.035 ${rangesMax.z}`}\n          rotation='0 0 90'\n        />\n      );\n    });\n\n  const axisTitle = () => (\n    <Entity\n      text={{\n        width: rangesMax.x,\n        value: title,\n        color: color,\n        side: 'front',\n        anchor: 'align',\n        align: 'center'\n      }}\n      position={`${rangesMax.x / 2} ${\n        titlePadding !== null ? -titlePadding : -0.22\n      } ${rangesMax.z}`}\n      rotation='0 0 0'\n    />\n  );\n\n  const showLabels =\n    labels === false ? labels : defaults.view.encoding.axis.labels;\n\n  const showTicks = ticks === false ? ticks : defaults.view.encoding.axis.ticks;\n\n  return (\n    <Axis\n      {...props}\n      axis='x'\n      start={`0 0 ${rangesMax.z}`}\n      end={`${rangesMax.x} 0 ${rangesMax.z}`}\n      color={color}\n      ticks={showTicks ? axisTicks() : null}\n      tickText={showTicks && showLabels ? axisTickText() : null}\n      title={axisTitle()}\n    />\n  );\n};\n\nexport const YAxis = (props) => {\n  const {\n    scales,\n    tickOffset,\n    color,\n    tickValues,\n    rangesMax,\n    numberFormat,\n    title,\n    titlePadding,\n    labels,\n    ticks\n  } = props;\n\n  const axisTicks = () =>\n    tickValues.map((tick, i) => (\n      <Entity\n        key={`yTicks${i}`}\n        line={{\n          start: `0 ${scales.y(tick) + tickOffset} 0`,\n          end: `-0.025 ${scales.y(tick) + tickOffset} 0`,\n          color: color\n        }}\n      />\n    ));\n\n  const axisTickText = () =>\n    tickValues.map((tick, i) => {\n      let value = tick;\n      if (typeof value === 'number' && typeof numberFormat === 'string') {\n        value = d3.format(numberFormat)(tick);\n      }\n\n      return (\n        <Entity\n          key={`yTickText${i}`}\n          text={{\n            width: 0.6,\n            value: value,\n            color: color,\n            side: 'front',\n            anchor: 'align',\n            align: 'right'\n          }}\n          position={`-0.035 ${scales.y(tick) + tickOffset} 0`}\n          rotation='0 0 0'\n        />\n      );\n    });\n\n  const axisTitle = () => (\n    <Entity\n      text={{\n        width: rangesMax.y,\n        value: title,\n        color: color,\n        side: 'front',\n        anchor: 'align',\n        align: 'center'\n      }}\n      position={`${titlePadding !== null ? -titlePadding : -0.22} ${\n        rangesMax.y / 2\n      } 0`}\n      rotation='0 0 90'\n    />\n  );\n\n  const showLabels =\n    labels === false ? labels : defaults.view.encoding.axis.labels;\n\n  const showTicks = ticks === false ? ticks : defaults.view.encoding.axis.ticks;\n\n  return (\n    <Axis\n      {...props}\n      axis='y'\n      start='0 0 0'\n      end={`0 ${rangesMax.y} 0`}\n      color={color}\n      ticks={showTicks ? axisTicks() : null}\n      tickText={showTicks && showLabels ? axisTickText() : null}\n      title={axisTitle()}\n    />\n  );\n};\n\nexport const ZAxis = (props) => {\n  const {\n    scales,\n    tickOffset,\n    color,\n    tickValues,\n    rangesMax,\n    numberFormat,\n    title,\n    titlePadding,\n    labels,\n    ticks\n  } = props;\n\n  const axisTicks = () =>\n    tickValues.map((tick, i) => (\n      <Entity\n        key={`zTicks${i}`}\n        line={{\n          start: `0 0 ${scales.z(tick) + tickOffset}`,\n          end: `0 -0.025 ${scales.z(tick) + tickOffset}`,\n          color: color\n        }}\n      />\n    ));\n\n  const axisTickText = () =>\n    tickValues.map((tick, i) => {\n      let value = tick;\n      if (typeof value === 'number' && typeof numberFormat === 'string') {\n        value = d3.format(numberFormat)(tick);\n      }\n\n      return (\n        <Entity\n          key={`zTickText${i}`}\n          text={{\n            width: 0.6,\n            value: value,\n            color: color,\n            side: 'front',\n            anchor: 'align',\n            align: 'right'\n          }}\n          position={`0 -0.035 ${scales.z(tick) + tickOffset}`}\n          rotation='0 -90 90'\n        />\n      );\n    });\n\n  const axisTitle = () => (\n    <Entity\n      text={{\n        width: rangesMax.z,\n        value: title,\n        color: color,\n        side: 'front',\n        anchor: 'align',\n        align: 'center'\n      }}\n      position={`0 ${titlePadding !== null ? -titlePadding : -0.22} ${\n        rangesMax.z / 2\n      }`}\n      rotation='0 -90 0'\n    />\n  );\n\n  const showLabels =\n    labels === false ? labels : defaults.view.encoding.axis.labels;\n\n  const showTicks = ticks === false ? ticks : defaults.view.encoding.axis.ticks;\n\n  return (\n    <Axis\n      {...props}\n      axis='z'\n      start='0 0 0'\n      end={`0 0 ${rangesMax.z}`}\n      color={color}\n      ticks={showTicks ? axisTicks() : null}\n      tickText={showTicks && showLabels ? axisTickText() : null}\n      title={axisTitle()}\n    />\n  );\n};\n\nexport const axes = [XAxis, YAxis, ZAxis];\n\nexport default axes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Entity } from 'aframe-react';\n\nimport { XAxis, YAxis, ZAxis } from './axes';\n\nimport { log } from '../../../utils';\n\nimport { defaults } from '../../../grammar/defaults';\n\nconst Axes = (props) => {\n  log.debug('Axes Rendering');\n\n  const { view, options, scales, rangesMax } = props;\n\n  const generateTitle = () => {\n    let title;\n    if (view.title) {\n      title = (\n        <Entity\n          text={{\n            width: rangesMax.x,\n            value: view.title,\n            color: options.chartColor,\n            side: 'front',\n            anchor: 'align',\n            align: 'center'\n          }}\n          position={`${rangesMax.x / 2 || 0} ${\n            rangesMax.y ? rangesMax.y + view.titlePadding : view.titlePadding\n          } 0`}\n        />\n      );\n    }\n    return title;\n  };\n\n  const generateAxes = () => {\n    const axes = [];\n\n    ['x', 'y', 'z'].forEach((channel) => {\n      // If this channel is in the view\n      if (view.encoding[channel] && view.encoding[channel]?.axis !== false) {\n        // Set the axis title from encoding axis title or field name\n        let title;\n        if (view.encoding[channel].axis?.title !== undefined) {\n          title = view.encoding[channel].axis.title;\n        } else {\n          title = view.encoding[channel].field;\n        }\n\n        let tickValues;\n        let tickOffset = 0;\n        let tickCount = null;\n\n        // Use scale for ticks for quantitative fields\n        if (view.encoding[channel].type === 'quantitative') {\n          // Tick values from scale\n          tickCount = view.encoding[channel]?.axis?.tickCount || tickCount;\n          if (tickCount !== null) {\n            tickValues = scales[channel].ticks(tickCount);\n          } else {\n            tickValues = scales[channel].ticks();\n          }\n\n          // Use scale domain for ticks for categorical fields\n        } else {\n          tickValues = scales[channel].domain();\n          tickOffset = scales[channel].bandwidth() / 2;\n        }\n\n        // Store each axis\n        // TODO: More orients\n        // TODO: Copy and flip axis label and title 180 degrees for visibility\n        // Faces only currently support:\n        // - x: front, back\n        // - y: front, back\n        // - z : left, right\n\n        let xFace =\n          view.encoding[channel]?.axis?.face ||\n          defaults.view.encoding.axis.face.x;\n\n        xFace = xFace === 'front' ? 0 : -rangesMax.z;\n\n        let yFace =\n          view.encoding[channel]?.axis?.face ||\n          defaults.view.encoding.axis.face.y;\n\n        yFace = yFace === 'front' ? rangesMax.z : 0;\n\n        let zFace =\n          view.encoding[channel]?.axis?.face ||\n          defaults.view.encoding.axis.face.z;\n\n        zFace = zFace === 'left' ? 0 : rangesMax.x;\n\n        switch (channel) {\n          case 'x':\n            axes.push(\n              <XAxis\n                key='xAxis'\n                fieldType={view.encoding[channel].type}\n                numberFormat={view.encoding[channel].numberFormat}\n                tickValues={tickValues}\n                tickOffset={tickOffset}\n                scales={scales}\n                rangesMax={rangesMax}\n                color={options.chartColor}\n                title={title}\n                titlePadding={view.encoding[channel]?.axis?.titlePadding}\n                labels={view.encoding[channel]?.axis?.labels}\n                ticks={view.encoding[channel]?.axis?.ticks}\n                position={`0 0 ${xFace}`}\n              />\n            );\n            break;\n          case 'y':\n            axes.push(\n              <YAxis\n                key='yAxis'\n                fieldType={view.encoding[channel].type}\n                numberFormat={view.encoding[channel].numberFormat}\n                tickValues={tickValues}\n                tickOffset={tickOffset}\n                scales={scales}\n                rangesMax={rangesMax}\n                color={options.chartColor}\n                title={title}\n                titlePadding={view.encoding[channel]?.axis?.titlePadding}\n                labels={view.encoding[channel]?.axis?.labels}\n                ticks={view.encoding[channel]?.axis?.ticks}\n                position={`0 0 ${yFace}`}\n              />\n            );\n            break;\n          case 'z':\n            axes.push(\n              <ZAxis\n                key='zAxis'\n                fieldType={view.encoding[channel].type}\n                numberFormat={view.encoding[channel].numberFormat}\n                tickValues={tickValues}\n                tickOffset={tickOffset}\n                scales={scales}\n                rangesMax={rangesMax}\n                color={options.chartColor}\n                title={title}\n                titlePadding={view.encoding[channel]?.axis?.titlePadding}\n                labels={view.encoding[channel]?.axis?.labels}\n                ticks={view.encoding[channel]?.axis?.ticks}\n                position={`${zFace} 0 0`}\n              />\n            );\n            break;\n          default:\n            break;\n        }\n      }\n    });\n\n    return axes;\n  };\n\n  return (\n    <Entity>\n      {generateTitle()}\n      {generateAxes()}\n    </Entity>\n  );\n};\n\nAxes.propTypes = {\n  view: PropTypes.object.isRequired,\n  options: PropTypes.object.isRequired,\n  scales: PropTypes.object.isRequired,\n  rangesMax: PropTypes.object.isRequired\n};\n\nexport default React.memo(Axes, (prev, next) => prev.view === next.view);\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Entity } from 'aframe-react';\n\nimport { log } from '../../../utils';\n\nimport { DispatchContext } from '../../../reducer';\nimport { actionTypes } from '../../../actions';\n\nimport { defaults } from '../../../grammar/defaults';\n\nconst AxisFilters = (props) => {\n  log.debug('Axis Filters Rendering');\n  const dispatch = useContext(DispatchContext);\n\n  const opacity = 1;\n\n  const { view, options, dataset, scales, domainMap, rangesMax } = props;\n\n  // Faces\n  // TODO: Orients\n  // Faces only currently support:\n  // - x: front, back\n  // - y: front, back\n  // - z : left, right\n\n  let xFace;\n  let yFace;\n  let zFace;\n\n  if (view.encoding.x?.axis?.filter === true) {\n    xFace = view.encoding.x?.axis?.face || defaults.view.encoding.axis.face.x;\n    xFace = xFace === 'front' ? 0 : -rangesMax.z;\n  }\n\n  if (view.encoding.y?.axis?.filter === true) {\n    yFace = view.encoding.y?.axis?.face || defaults.view.encoding.axis.face.y;\n    yFace = yFace === 'front' ? rangesMax.z : 0;\n  }\n\n  if (view.encoding.z?.axis?.filter === true) {\n    zFace = view.encoding.z?.axis?.face || defaults.view.encoding.axis.face.z;\n    zFace = zFace === 'left' ? 0 : rangesMax.x;\n  }\n\n  let faces = { xFace, yFace, zFace };\n\n  const XFilter = (view, scales, opacity, domainMap, faces) => (\n    <Entity position={`0 0 ${faces.xFace}`}>\n      <Entity\n        class='interactive'\n        grabbable={{\n          suppressY: true,\n          suppressZ: true\n        }}\n        events={{\n          'grab-end': (e) => {\n            dispatch({\n              type: actionTypes.FILTER_DATA,\n              payload: {\n                value: scales.x.invert(\n                  e.detail.target.getAttribute('position').x\n                ),\n                field: view.encoding.x.field,\n                bound: 0,\n                type: 'axis'\n              }\n            });\n          }\n        }}\n        opacity={opacity}\n        primitive='a-cone'\n        radius-top='0.0'\n        radius-bottom='0.01'\n        height='0.03'\n        color='#FFA493'\n        position={`${scales.x(\n          domainMap.get(view.encoding.x.field)[0]\n        )} -0.015 ${scales.z ? scales.z.range()[1] : 0}`}\n        rotation='0 0 0'\n      />\n      <Entity\n        class='interactive'\n        grabbable={{\n          suppressY: true,\n          suppressZ: true\n        }}\n        events={{\n          'grab-end': (e) => {\n            dispatch({\n              type: actionTypes.FILTER_DATA,\n              payload: {\n                value: scales.x.invert(\n                  e.detail.target.getAttribute('position').x\n                ),\n                field: view.encoding.x.field,\n                bound: 1,\n                type: 'axis'\n              }\n            });\n          }\n        }}\n        opacity={opacity}\n        primitive='a-cone'\n        radius-top='0.0'\n        radius-bottom='0.01'\n        height='0.03'\n        color='#FFA493'\n        position={`${scales.x(\n          domainMap.get(view.encoding.x.field)[1]\n        )} -0.015 ${scales.z ? scales.z.range()[1] : 0}`}\n        rotation='0 0 0'\n      />\n    </Entity>\n  );\n\n  const YFilter = (view, scales, opacity, domainMap, faces) => (\n    <Entity position={`0 0 ${faces.yFace}`}>\n      <Entity\n        class='interactive'\n        grabbable={{\n          suppressX: true,\n          suppressZ: true\n        }}\n        events={{\n          'grab-end': (e) => {\n            dispatch({\n              type: actionTypes.FILTER_DATA,\n              payload: {\n                value: scales.y.invert(\n                  e.detail.target.getAttribute('position').y\n                ),\n                field: view.encoding.y.field,\n                bound: 0,\n                type: 'axis'\n              }\n            });\n          }\n        }}\n        opacity={opacity}\n        primitive='a-cone'\n        radius-top='0.0'\n        radius-bottom='0.01'\n        height='0.03'\n        color='#98FF97'\n        position={`-0.015 ${scales.y(\n          domainMap.get(view.encoding.y.field)[0]\n        )} ${scales.z ? scales.z.range()[0] : 0}`}\n        rotation='0 0 -90'\n      />\n      <Entity\n        class='interactive'\n        grabbable={{\n          suppressX: true,\n          suppressZ: true\n        }}\n        events={{\n          'grab-end': (e) => {\n            dispatch({\n              type: actionTypes.FILTER_DATA,\n              payload: {\n                value: scales.y.invert(\n                  e.detail.target.getAttribute('position').y\n                ),\n                field: view.encoding.y.field,\n                bound: 1,\n                type: 'axis'\n              }\n            });\n          }\n        }}\n        opacity={opacity}\n        primitive='a-cone'\n        radius-top='0.0'\n        radius-bottom='0.01'\n        height='0.03'\n        color='#98FF97'\n        position={`-0.015 ${scales.y(\n          domainMap.get(view.encoding.y.field)[1]\n        )} ${scales.z ? scales.z.range()[0] : 0}`}\n        rotation='0 0 -90'\n      />\n    </Entity>\n  );\n\n  const ZFilter = (view, scales, opacity, domainMap, faces) => (\n    <Entity position={`${faces.zFace} 0 0`}>\n      <Entity\n        class='interactive'\n        grabbable={{\n          suppressX: true,\n          suppressY: true\n        }}\n        events={{\n          'grab-end': (e) => {\n            dispatch({\n              type: actionTypes.FILTER_DATA,\n              payload: {\n                value: scales.z.invert(\n                  e.detail.target.getAttribute('position').z\n                ),\n                field: view.encoding.z.field,\n                bound: 0,\n                type: 'axis'\n              }\n            });\n          }\n        }}\n        opacity={opacity}\n        primitive='a-cone'\n        radius-top='0.0'\n        radius-bottom='0.01'\n        height='0.03'\n        color='#86D7F5'\n        position={`-0.015 0 ${scales.z(\n          domainMap.get(view.encoding.z.field)[0]\n        )}`}\n        rotation='0 0 -90'\n      />\n      <Entity\n        class='interactive'\n        grabbable={{\n          suppressX: true,\n          suppressY: true\n        }}\n        events={{\n          'grab-end': (e) => {\n            dispatch({\n              type: actionTypes.FILTER_DATA,\n              payload: {\n                value: scales.z.invert(\n                  e.detail.target.getAttribute('position').z\n                ),\n                field: view.encoding.z.field,\n                bound: 1,\n                type: 'axis'\n              }\n            });\n          }\n        }}\n        opacity={opacity}\n        primitive='a-cone'\n        radius-top='0.0'\n        radius-bottom='0.01'\n        height='0.03'\n        color='#86D7F5'\n        position={`-0.015 0 ${scales.z(\n          domainMap.get(view.encoding.z.field)[1]\n        )}`}\n        rotation='0 0 -90'\n      />\n    </Entity>\n  );\n\n  const mutualProps = [view, scales, opacity, domainMap, faces];\n\n  return (\n    <Entity>\n      {view.encoding.x?.axis?.filter === true ? XFilter(...mutualProps) : null}\n      {view.encoding.y?.axis?.filter === true ? YFilter(...mutualProps) : null}\n      {view.encoding.z?.axis?.filter === true ? ZFilter(...mutualProps) : null}\n    </Entity>\n  );\n};\n\nAxisFilters.propTypes = {\n  view: PropTypes.object.isRequired,\n  options: PropTypes.object.isRequired,\n  dataset: PropTypes.array.isRequired,\n  scales: PropTypes.object.isRequired,\n  domainMap: PropTypes.object.isRequired\n};\n\nexport default React.memo(\n  AxisFilters,\n  (prev, next) => prev.domainMap === next.domainMap\n);\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Entity } from 'aframe-react';\nimport * as d3 from 'd3';\nimport isEqual from 'react-fast-compare';\n\nimport { defaults } from '../../../grammar/defaults';\n\nimport { log } from '../../../utils';\n\nimport { DispatchContext } from '../../../reducer';\nimport { actionTypes } from '../../../actions';\n\nconst Marks = (props) => {\n  log.debug('Marks Rendering');\n  const { view, dataset, scales, customMarks } = props;\n\n  const dispatch = useContext(DispatchContext);\n\n  const markType = view.mark.type;\n  const markShape = view.mark.shape;\n\n  // Loop over all rows in the data\n  const marks = dataset.map((row, i) => {\n    const vriaid = `vria-${row.vriaid}`;\n\n    // Set up tooltip\n    let tooltipContent = '';\n    let tooltipHeight = 0.05;\n    const lineHeight = 0.021;\n    if (view.mark.tooltip !== false && view.mark.tooltip !== undefined) {\n      if (view.mark.tooltip.content === 'data') {\n        // Show all data in the dataset\n        Object.keys(row).forEach((el) => {\n          if (el !== 'vriaid') {\n            tooltipContent += `${el}: ${row[el]}\\n`;\n          }\n        });\n        tooltipHeight = Object.keys(row).length * lineHeight;\n      } else if (view.mark.tooltip.content === 'encoding') {\n        // Show just the encodings in this view for this mark\n        // Get all fields in this view\n        const fields = new Set();\n        Object.keys(view.encoding).forEach((channel) => {\n          if (view.encoding[channel].field)\n            fields.add(view.encoding[channel].field);\n        });\n        Object.keys(row).forEach((el) => {\n          if (el !== 'vriaid' && fields.has(el)) {\n            tooltipContent += `${el}: ${row[el]}\\n`;\n          }\n        });\n        tooltipHeight = (fields.size + 1) * lineHeight;\n      } else if (Array.isArray(view.mark.tooltip.content)) {\n        // If tooltip content is an array, get field names\n        Object.keys(row).forEach((el) => {\n          if (el !== 'vriaid' && view.mark.tooltip.content.includes(el)) {\n            tooltipContent += `${el}: ${row[el]}\\n`;\n          }\n        });\n        tooltipHeight = (view.mark.tooltip.content.length + 1) * lineHeight;\n      } else {\n        // Single field name\n        tooltipContent = `${view.mark.tooltip.content}: ${\n          row[view.mark.tooltip.content]\n        }`;\n      }\n    }\n\n    const markEvents = {\n      mouseenter: (e) => {\n        e.target.setAttribute('opacity', 0.5);\n\n        if (view.mark.tooltip !== false && view.mark.tooltip !== undefined) {\n          const tooltip = e.detail.cursorEl.parentEl.querySelector('.tooltip');\n          tooltip.setAttribute(\n            'height',\n            e.target.getAttribute('tooltipHeight')\n          );\n          tooltip.setAttribute('visible', true);\n          tooltip.setAttribute('text', {\n            ...tooltip.getAttribute('text'),\n            value: e.target.getAttribute('tooltipContent')\n          });\n        }\n      },\n      mouseleave: (e) => {\n        e.target.setAttribute(\n          'opacity',\n          e.target.getAttribute('initialOpacity') || 0\n        );\n        if (view.mark.tooltip !== false && view.mark.tooltip !== undefined) {\n          // If there is a single selected mark in the scene, set tooltip, else hide\n          if (\n            document.querySelectorAll('[vria-only-selected-mark]').length !== 0\n          ) {\n            document.querySelectorAll('.tooltip').forEach((el) => {\n              el.setAttribute('text', {\n                value: document\n                  .querySelector('[selected]')\n                  .getAttribute('tooltipContent')\n              });\n            });\n          } else {\n            const tooltip = e.detail.cursorEl.parentEl.querySelector(\n              '.tooltip'\n            );\n            tooltip.setAttribute('visible', false);\n          }\n        }\n        if (\n          e.target.getAttribute('selected') &&\n          e.target.getAttribute('wireframe')\n        ) {\n          e.target.setAttribute('opacity', 1);\n        }\n      },\n      click: (e) => {\n        if (e.detail !== 0) {\n          const showTooltip =\n            view.mark.tooltip !== false && view.mark.tooltip !== undefined;\n\n          dispatch({\n            type: actionTypes.MARK_SELECTED,\n            payload: {\n              id: row.vriaid,\n              vriaid,\n              cursor: showTooltip\n                ? e.detail.cursorEl.parentEl.querySelector('.tooltip')\n                : null,\n              tooltipHeight: showTooltip\n                ? e.target.getAttribute('tooltipHeight')\n                : null,\n              tooltipContent: showTooltip\n                ? e.target.getAttribute('tooltipContent')\n                : null\n            }\n          });\n        }\n      }\n    };\n\n    // The resulting mark to be displayed\n    let mark;\n\n    // Store all attributes of this mark\n    const attributes = {};\n\n    // Loop over every encoding channel\n    Object.keys(view.encoding).forEach((channel) => {\n      // Get the field of that channel\n      const field = view.encoding[channel].field;\n\n      // Get the appropriate scale for this channel\n      const scale = scales[channel];\n\n      // Set property in attributes object\n      attributes[channel] = scale(row[field]);\n    });\n\n    // Defaults\n    if (attributes.opacity === undefined) attributes.opacity = 1;\n    if (attributes.color === undefined)\n      attributes.color = d3.schemeCategory10[0];\n\n    // Which type to render\n    switch (markType) {\n      // Scatter based charts\n      case 'point': {\n        attributes.size = attributes.size || defaults.view.mark.point.size;\n        const radius = attributes.size;\n\n        attributes.width = attributes.width || attributes.size;\n        attributes.height = attributes.height || attributes.size;\n        attributes.depth = attributes.depth || attributes.size;\n\n        // This point's offset in the view\n        if (typeof attributes.xoffset === 'string') {\n          switch (attributes.xoffset) {\n            case 'half': {\n              attributes.x = attributes.x / 2;\n            }\n          }\n        } else if (attributes.xoffset !== undefined) {\n          attributes.x += attributes.xoffset;\n        }\n        if (typeof attributes.yoffset === 'string') {\n          switch (attributes.yoffset) {\n            case 'half': {\n              attributes.y = attributes.y / 2;\n            }\n          }\n        } else if (attributes.yoffset !== undefined) {\n          attributes.y += attributes.yoffset;\n        }\n        if (attributes.z && typeof attributes.zoffset === 'string') {\n          switch (attributes.zoffset) {\n            case 'half': {\n              attributes.z = attributes.z / 2;\n            }\n          }\n        } else if (attributes.zoffset !== undefined) {\n          attributes.z += attributes.zoffset;\n        }\n\n        // This point's position in the view\n        attributes.position = `${attributes.x || 0} ${attributes.y || 0} ${\n          attributes.z || 0\n        }`;\n\n        // This point's rotation in the view\n        attributes.rotation = `${attributes.xrotation || 0} ${\n          attributes.yrotation || 0\n        } ${attributes.zrotation || 0}`;\n        console.log(attributes.rotation);\n\n        // Shape scale\n        const shapeScaleMark = attributes.shape ? attributes.shape : null;\n\n        switch (shapeScaleMark || markShape) {\n          case 'sphere':\n            mark = (\n              <Entity\n                key={i}\n                tooltipContent={tooltipContent}\n                tooltipHeight={tooltipHeight}\n                primitive='a-sphere'\n                className={`interactive vria-mark ${vriaid}`}\n                data-mark={JSON.stringify(row)}\n                radius='0.5'\n                scale={{\n                  x: attributes.width || radius,\n                  y: attributes.height || radius,\n                  z: attributes.depth || radius\n                }}\n                segments-height='9'\n                segments-width='18'\n                color={attributes.color}\n                initialColor={attributes.color}\n                position={attributes.position}\n                rotation={attributes.rotation}\n                initialOpacity={attributes.opacity}\n                opacity={attributes.opacity}\n                events={markEvents}\n              />\n            );\n            break;\n          case 'box':\n            mark = (\n              <Entity\n                key={i}\n                tooltipContent={tooltipContent}\n                tooltipHeight={tooltipHeight}\n                primitive='a-box'\n                className={`interactive vria-mark ${vriaid}`}\n                data-mark={JSON.stringify(row)}\n                scale={{\n                  x: attributes.width || radius,\n                  y: attributes.height || radius,\n                  z: attributes.depth || radius\n                }}\n                width='1'\n                height='1'\n                depth='1'\n                color={attributes.color}\n                initialColor={attributes.color}\n                position={attributes.position}\n                rotation={attributes.rotation}\n                initialOpacity={attributes.opacity}\n                opacity={attributes.opacity}\n                events={markEvents}\n              />\n            );\n            break;\n          case 'cone':\n            mark = (\n              <Entity\n                key={i}\n                tooltipContent={tooltipContent}\n                tooltipHeight={tooltipHeight}\n                primitive='a-cone'\n                className={`interactive vria-mark ${vriaid}`}\n                data-mark={JSON.stringify(row)}\n                // height={attributes.length || attributes.height || radius * 2}\n                height='1'\n                scale={{\n                  x: attributes.width || radius,\n                  y: attributes.height || radius,\n                  z: attributes.depth || radius\n                }}\n                color={attributes.color}\n                initialColor={attributes.color}\n                position={attributes.position}\n                rotation={attributes.rotation}\n                segments-height='9'\n                segments-radial='18'\n                radius-top='0'\n                radius-bottom='0.5'\n                initialOpacity={attributes.opacity}\n                opacity={attributes.opacity}\n                events={markEvents}\n              />\n            );\n            break;\n          case 'tetrahedron':\n            mark = (\n              <Entity\n                key={i}\n                tooltipContent={tooltipContent}\n                tooltipHeight={tooltipHeight}\n                primitive='a-tetrahedron'\n                className={`interactive vria-mark ${vriaid}`}\n                data-mark={JSON.stringify(row)}\n                radius='1'\n                scale={{\n                  x: attributes.width || radius,\n                  y: attributes.height || radius,\n                  z: attributes.depth || radius\n                }}\n                color={attributes.color}\n                initialColor={attributes.color}\n                position={attributes.position}\n                rotation={attributes.rotation}\n                initialOpacity={attributes.opacity}\n                opacity={attributes.opacity}\n                events={markEvents}\n              />\n            );\n            break;\n          case 'torus':\n            mark = (\n              <Entity\n                key={i}\n                tooltipContent={tooltipContent}\n                tooltipHeight={tooltipHeight}\n                primitive='a-torus'\n                className={`interactive vria-mark ${vriaid}`}\n                data-mark={JSON.stringify(row)}\n                radius='0.5'\n                radius-tubular='0.05'\n                scale={{\n                  x: attributes.width || radius,\n                  y: attributes.height || radius,\n                  z: attributes.depth || radius\n                }}\n                segments-radial='18'\n                segments-tubular='16'\n                color={attributes.color}\n                initialColor={attributes.color}\n                position={attributes.position}\n                rotation={attributes.rotation}\n                initialOpacity={attributes.opacity}\n                opacity={attributes.opacity}\n                events={markEvents}\n              />\n            );\n            break;\n          case 'cylinder':\n            mark = (\n              <Entity\n                key={i}\n                tooltipContent={tooltipContent}\n                tooltipHeight={tooltipHeight}\n                primitive='a-cylinder'\n                className={`interactive vria-mark ${vriaid}`}\n                data-mark={JSON.stringify(row)}\n                rotation={attributes.rotation}\n                radius={attributes.width / 2 || 0.05}\n                height={attributes.depth !== 0 ? attributes.depth : 0.001}\n                color={attributes.color}\n                initialColor={attributes.color}\n                position={attributes.position}\n                initialOpacity={attributes.opacity}\n                opacity={attributes.opacity}\n                events={markEvents}\n              />\n            );\n            break;\n          // Custom Mark\n          default: {\n            const data = JSON.stringify(row);\n            const key = i;\n            const className = `interactive vria-mark ${vriaid}`;\n            mark = (\n              <Entity\n                tooltipContent={tooltipContent}\n                tooltipHeight={tooltipHeight}\n                wireframe\n                color='white'\n                initialColor='white'\n                primitive='a-box'\n                opacity='0'\n                key={key}\n                className={className}\n                data-mark={data}\n                width={attributes.size}\n                height={attributes.size}\n                depth={attributes.size}\n                rotation={attributes.rotation}\n                position={attributes.position}\n                events={markEvents}>\n                {customMarks[markShape]({ ...attributes, scales, data })}\n              </Entity>\n            );\n            break;\n          }\n        }\n        break;\n      }\n      // Bar based charts\n      case 'bar': {\n        // Data field types\n        const fTypes = {\n          x: view.encoding?.x?.type || null,\n          y: view.encoding?.y?.type || null,\n          z: view.encoding?.z?.type || null\n        };\n\n        // Quantitative field\n        const q = [];\n\n        // Null fields\n        const n = [];\n\n        // Field counts\n        Object.keys(fTypes).forEach((f) => {\n          if (fTypes[f] === 'quantitative') {\n            q.push(f);\n          } else if (fTypes[f] === null) {\n            n.push(f);\n          }\n        });\n\n        // Valid number of quantitative data fields\n        if (q.length === 1) {\n          // Number of null fields determines dimensionality\n          if (n.length === 2) {\n            // 1D chart\n            log.error(\n              'Chart type \"bar\" expects 2 axis encoding channels (x, y and/or z)'\n            );\n          } else if (n.length === 1) {\n            // 2D chart\n          } else {\n            // 3D chart\n          }\n        } else {\n          log.error(\n            'Chart type \"bar\" expects exactly one quantitative data field'\n          );\n        }\n\n        // The quantitative data field/axis\n        const quantField = q[0];\n\n        if (!scales.width && !scales.height && !scales.depth) {\n          // Position and dimensions of bars\n          let xPos = 0;\n          let yPos = 0;\n          let zPos = 0;\n          let width = 0;\n          let height = 0;\n          let depth = 0;\n\n          switch (quantField) {\n            case 'x':\n              xPos = scales.x ? attributes.x / 2 : 0.001;\n              yPos = scales.y ? attributes.y + scales.y.bandwidth() / 2 : 0.001;\n              zPos = scales.z\n                ? attributes.z + scales.z.bandwidth() / 2 || 0\n                : -0.001;\n              width = attributes.x || 0.001;\n              height = scales.y ? scales.y.bandwidth() : 0.001;\n              depth = scales.z ? scales.z.bandwidth() : 0.0001;\n              break;\n            case 'y':\n              xPos = scales.x ? attributes.x + scales.x.bandwidth() / 2 : 0.001;\n              yPos = scales.y ? attributes.y / 2 : 0.001;\n              zPos = scales.z\n                ? attributes.z + scales.z.bandwidth() / 2 || 0\n                : -0.001;\n              width = scales.x ? scales.x.bandwidth() : 0.001;\n              height = attributes.y || 0.001;\n              depth = scales.z ? scales.z.bandwidth() : 0.001;\n              break;\n            case 'z':\n              xPos = scales.x ? attributes.x + scales.x.bandwidth() / 2 : 0.001;\n              yPos = scales.y\n                ? attributes.y + scales.y.bandwidth() / 2 || 0\n                : 0.001;\n              zPos = scales.z ? attributes.z / 2 : -0.001;\n              width = scales.x ? scales.x.bandwidth() : 0.001;\n              height = scales.y ? scales.y.bandwidth() : 0.001;\n              depth = attributes.z || 0.001;\n              break;\n            default:\n              break;\n          }\n\n          attributes.position = `${xPos} ${yPos} ${zPos}`;\n\n          switch (markShape) {\n            case 'box':\n              mark = (\n                <Entity\n                  key={i}\n                  tooltipContent={tooltipContent}\n                  tooltipHeight={tooltipHeight}\n                  position={attributes.position}\n                  primitive='a-box'\n                  className={`interactive vria-mark ${vriaid}`}\n                  data-mark={JSON.stringify(row)}\n                  width={width}\n                  height={height}\n                  depth={depth}\n                  color={attributes.color}\n                  initialColor={attributes.color}\n                  initialOpacity={attributes.opacity}\n                  opacity={attributes.opacity}\n                  events={markEvents}\n                />\n              );\n              break;\n            case 'plane':\n              // TODO: Plane\n              break;\n            case 'cylinder':\n              mark = (\n                <Entity\n                  key={i}\n                  tooltipContent={tooltipContent}\n                  tooltipHeight={tooltipHeight}\n                  primitive='a-cylinder'\n                  className={`interactive vria-mark ${vriaid}`}\n                  data-mark={JSON.stringify(row)}\n                  rotation='0 0 0'\n                  radius={width / 2}\n                  height={height}\n                  color={attributes.color}\n                  initialColor={attributes.color}\n                  position={attributes.position}\n                  initialOpacity={attributes.opacity}\n                  opacity={attributes.opacity}\n                  events={markEvents}\n                />\n              );\n              break;\n            case 'cone':\n              mark = (\n                <Entity\n                  key={i}\n                  tooltipContent={tooltipContent}\n                  tooltipHeight={tooltipHeight}\n                  primitive='a-cone'\n                  className={`interactive vria-mark ${vriaid}`}\n                  data-mark={JSON.stringify(row)}\n                  height={height}\n                  color={attributes.color}\n                  initialColor={attributes.color}\n                  position={attributes.position}\n                  rotation={attributes.rotation}\n                  segments-height='9'\n                  segments-radial='18'\n                  radius-top='0'\n                  radius-bottom={d3.min([\n                    scales.x.bandwidth() / 2,\n                    scales.z.bandwidth() / 2\n                  ])}\n                  initialOpacity={attributes.opacity}\n                  opacity={attributes.opacity}\n                  events={markEvents}\n                />\n              );\n              break;\n            // Custom Mark\n            default: {\n              const data = JSON.stringify(row);\n              const key = i;\n              const className = `interactive vria-mark ${vriaid}`;\n              console.log('custommarks', customMarks);\n              mark = (\n                <Entity\n                  tooltipContent={tooltipContent}\n                  tooltipHeight={tooltipHeight}\n                  wireframe\n                  color='white'\n                  initialColor='white'\n                  primitive='a-box'\n                  opacity='0'\n                  key={key}\n                  className={className}\n                  width={width}\n                  height={height}\n                  depth={depth}\n                  rotation={attributes.rotation}\n                  position={attributes.position}\n                  events={markEvents}>\n                  {customMarks[markShape]({\n                    ...attributes,\n                    scales,\n                    data,\n                    width,\n                    height,\n                    depth\n                  })}\n                </Entity>\n              );\n              break;\n            }\n          }\n        }\n        break;\n      }\n      default:\n        break;\n    }\n    return mark;\n  });\n\n  return <Entity className='marks'>{marks}</Entity>;\n};\n\nMarks.propTypes = {\n  view: PropTypes.object.isRequired,\n  customMarks: PropTypes.object,\n  dataset: PropTypes.array.isRequired,\n  scales: PropTypes.object.isRequired\n};\n\nexport default React.memo(Marks, (prevProps, nextProps) => {\n  return (\n    isEqual(prevProps.view, nextProps.view) &&\n    isEqual(prevProps.parsedDataset, nextProps.parsedDataset)\n  );\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Entity } from 'aframe-react';\n\nimport { defaults } from '../../../grammar/defaults';\n\nimport Legend from '../Legend';\nimport Axes from '../Axes';\nimport AxisFilters from '../AxisFilters';\nimport Marks from '../Marks';\n\nconst View = (props) => {\n  const { view, scales, index } = props;\n  const position = `${view.x} ${view.y + defaults.options.userHeight} ${\n    view.z\n  }`;\n  const rotation = `${view.xrotation} ${view.yrotation} ${view.zrotation}`;\n  const { width, height, depth } = view;\n\n  // Range maximums\n  const rangesMax = {\n    x: scales.x ? scales.x.range()[1] : 0,\n    y: scales.y ? scales.y.range()[1] : 0,\n    z: scales.z ? scales.z.range()[1] : 0\n  };\n\n  // Legends\n  const legends = Object.keys(view.encoding)\n    .filter((c) => view.encoding[c].legend)\n    .map((channel, i) => (\n      <Legend\n        key={`v${index}l${i}${channel}`}\n        {...props}\n        index={i}\n        channel={channel}\n        rangesMax={rangesMax}\n      />\n    ));\n\n  const markProps = {\n    view: props.view,\n    customMarks: props.customMarks,\n    dataset: props.dataset,\n    parsedDataset: props.parsedDataset,\n    scales: props.scales,\n    options: props.options\n  };\n\n  return (\n    <Entity\n      className={`vria-view-${index}`}\n      position={position}\n      rotation={rotation}\n      width={width}\n      height={height}\n      depth={depth}>\n      {legends}\n      <Axes {...props} rangesMax={rangesMax} />\n      <AxisFilters {...props} rangesMax={rangesMax} />\n      <Marks {...markProps} />\n    </Entity>\n  );\n};\n\nView.propTypes = {\n  view: PropTypes.object.isRequired,\n  options: PropTypes.object.isRequired,\n  dataset: PropTypes.array.isRequired,\n  parsedDataset: PropTypes.array.isRequired,\n  scales: PropTypes.object.isRequired,\n  domainMap: PropTypes.object.isRequired\n};\n\nexport default View;\n","import React from 'react';\nimport { Entity } from 'aframe-react';\n\n/* global AFRAME */\n\nconst Camera = (props) => {\n  // Desktop\n  const standardCamera = (\n    <Entity\n      primitive='a-camera'\n      wasd-controls-enabled\n      position='0 1.6 0'\n      capture-mouse\n      raycaster='objects: .interactive; far: 5'\n      cursor='rayOrigin: mouse'\n      super-hands={{\n        colliderEvent: 'raycaster-intersection',\n        colliderEventProperty: 'els',\n        colliderEndEvent: 'raycaster-intersection-cleared',\n        colliderEndEventProperty: 'clearedEls'\n      }}>\n      <Entity\n        primitive='a-plane'\n        id='tooltip'\n        className='tooltip'\n        visible='false'\n        position='0 -0.15 -0.4'\n        color='#333'\n        opacity='0.8'\n        width='auto'\n        height='auto'\n        text={{\n          value: 'Tooltip',\n          color: '#FFF',\n          xOffset: -0.18,\n          anchor: 'left',\n          align: 'left',\n          lineHeight: 50,\n          width: 0.4\n        }}\n      />\n    </Entity>\n  );\n\n  // VR\n  const vrCamera = (\n    <Entity\n      primitive='a-camera'\n      wasd-controls-enabled\n      position='0 1.6 0'\n      capture-mouse\n      raycaster='objects: .interactive; far: 5'\n      cursor='rayOrigin: mouse'\n      super-hands={{\n        colliderEvent: 'raycaster-intersection',\n        colliderEventProperty: 'els',\n        colliderEndEvent: 'raycaster-intersection-cleared',\n        colliderEndEventProperty: 'clearedEls'\n      }}\n    />\n  );\n\n  // Mobile camera\n  const mobileCamera = (\n    <Entity\n      primitive='a-camera'\n      wasd-controls-enabled\n      position='0 1.6 0'\n      capture-mouse>\n      <Entity\n        cursor={{\n          fuse: true,\n          fuseTimeout: 1250\n        }}\n        geometry={{\n          primitive: 'ring',\n          radiusInner: 0.01,\n          radiusOuter: 0.015\n        }}\n        material={{\n          color: props.options.baseColor,\n          shader: 'flat'\n        }}\n        fuse='true'\n        fuseTimeout='1250'\n        position='0 0 -0.6'\n        raycaster='objects: .interactive; far: 5;'\n        super-hands={{\n          colliderEvent: 'raycaster-intersection',\n          colliderEventProperty: 'els',\n          colliderEndEvent: 'raycaster-intersection-cleared',\n          colliderEndEventProperty: 'clearedEls'\n        }}\n        animation__fusing='property: scale; startEvents: fusing; easing: easeInCubic; dur: 1250; from: 1 1 1; to: 0.2 0.2 0.2'\n        animation__click='property: scale; startEvents: click; easing: easeInCubic; dur: 100; from: 0.2 0.2 0.2; to: 1 1 1'\n        animation__mouseleave='property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 400; to: 1 1 1'\n      />\n      <Entity\n        primitive='a-plane'\n        id='tooltip'\n        className='tooltip tooltip-mobile'\n        visible='false'\n        position='0 -0.15 -0.4'\n        color='#333'\n        opacity='0.8'\n        width='auto'\n        height='auto'\n        scale='0.5 0.5 0.5'\n        text={{\n          value: 'Tooltip',\n          color: '#FFF',\n          xOffset: -0.18,\n          anchor: 'left',\n          align: 'left',\n          lineHeight: 50,\n          width: 0.4\n        }}\n      />\n    </Entity>\n  );\n\n  // Camera to use\n  let camera;\n\n  if (AFRAME.utils.device.isMobile()) {\n    camera = mobileCamera;\n  } else if (AFRAME.utils.device.checkHeadsetConnected()) {\n    camera = vrCamera;\n  } else {\n    camera = standardCamera;\n  }\n\n  return camera;\n};\n\nexport default React.memo(\n  Camera,\n  (prev, next) => prev.options.baseColor === next.options.baseColor\n);\n","import React, { Fragment } from 'react';\nimport { Entity } from 'aframe-react';\n\n/* global AFRAME */\n\nconst Controllers = ({ handedness }) => {\n  if (\n    AFRAME.utils.device.checkHeadsetConnected() &&\n    !AFRAME.utils.device.isMobile() &&\n    handedness !== 'none'\n  ) {\n    return (\n      <Fragment>\n        {handedness === 'both' || handedness === 'left' ? (\n          <Entity>\n            <Entity\n              laser-controls='hand: left;model: false'\n              className='controller controller-left'\n              raycaster='showLine: true; far: 2; objects: .interactive'\n              super-hands={{\n                colliderEvent: 'raycaster-intersection',\n                colliderEventProperty: 'els',\n                colliderEndEvent: 'raycaster-intersection-cleared',\n                colliderEndEventProperty: 'clearedEls'\n              }}>\n              <Entity\n                scale='0.5 0.5 0.5'\n                primitive='a-plane'\n                color='#333'\n                opacity='0.8'\n                width='auto'\n                height='auto'\n                text={{\n                  value: 'Tooltip',\n                  color: '#FFF',\n                  xOffset: -0.18,\n                  anchor: 'left',\n                  align: 'left',\n                  lineHeight: 50,\n                  width: 0.4\n                }}\n                className='tooltip tooltip-left'\n                id='tooltip'\n                visible='false'\n                position='0 0.05 -0.2'\n                rotation='-20 0 0'\n              />\n              <Entity\n                primitive='a-box'\n                width='0.01'\n                height='0.01'\n                depth='0.1'\n                color='#EF2D2D'\n              />\n            </Entity>\n          </Entity>\n        ) : null}\n        {handedness === 'both' || handedness === 'right' ? (\n          <Entity>\n            <Entity\n              laser-controls='hand: right; model: false'\n              className='controller controller-right'\n              raycaster='showLine: true; far: 2; objects: .interactive'\n              super-hands={{\n                colliderEvent: 'raycaster-intersection',\n                colliderEventProperty: 'els',\n                colliderEndEvent: 'raycaster-intersection-cleared',\n                colliderEndEventProperty: 'clearedEls'\n              }}>\n              <Entity\n                scale='0.5 0.5 0.5'\n                primitive='a-plane'\n                color='#333'\n                opacity='0.8'\n                width='auto'\n                height='auto'\n                text={{\n                  value: 'Tooltip',\n                  color: '#FFF',\n                  xOffset: -0.18,\n                  anchor: 'left',\n                  align: 'left',\n                  lineHeight: 50,\n                  width: 0.4\n                }}\n                className='tooltip tooltip-right'\n                id='tooltip'\n                visible='false'\n                position='0 0.05 -0.2'\n                rotation='-20 0 0'\n              />\n              <Entity\n                primitive='a-box'\n                width='0.01'\n                height='0.01'\n                depth='0.1'\n                color='#EF2D2D'\n              />\n            </Entity>\n          </Entity>\n        ) : null}\n      </Fragment>\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default Controllers;\n","/* global AFRAME */\n\nconst setSceneAttributes = (el) => {\n  setTimeout(() => {\n    el.sceneEl.setAttribute('touch-to-click-converter');\n\n    const vrDisplayConnected = AFRAME.utils.device.checkHeadsetConnected();\n\n    if (!vrDisplayConnected) {\n      el.sceneEl.setAttribute('rayOrigin', 'mouse');\n    }\n  }, 0);\n};\n\nexport default setSceneAttributes;\n","import React, { useReducer, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Entity } from 'aframe-react';\n\nimport './lib/super-hands/super-hands';\n\nimport { actionTypes } from './actions';\nimport { reducer, initialState, DispatchContext } from './reducer';\nimport { compileVisConfig } from './grammar';\nimport { log } from './utils';\n\nimport { View } from './components/core';\nimport { Camera, Controllers, setSceneAttributes } from './components/scene';\n\nimport { defaults } from './grammar/defaults';\n\n// Named exports\nexport { default as schema } from './grammar/schema';\nexport { default as validateVisConfig } from './grammar/validateVisConfig';\n\n/**\n * @name VRIA\n * @description A Web-Based Framework for Creating Immersive Analytics Experiences\n */\nconst VRIA = ({\n  config,\n  options,\n  setSelection,\n  onSelection,\n  onConfigParsed,\n  setFilters,\n  onFilter,\n  additionalFilters,\n  customMarks,\n  ...rest\n}) => {\n  const [state, dispatch] = useReducer(reducer, {\n    ...initialState,\n    onConfigParsed,\n    onSelection,\n    onFilter,\n    additionalFilters,\n    options: {\n      ...defaults.options,\n      ...options\n    }\n  });\n\n  // Set options prop\n  useEffect(() => {\n    dispatch({ type: actionTypes.SET_OPTIONS, payload: options });\n  }, [options]);\n\n  // Set additional filters prop\n  useEffect(() => {\n    dispatch({\n      type: actionTypes.SET_ADDITIONAL_FILTERS,\n      payload: additionalFilters\n    });\n  }, [additionalFilters]);\n\n  // User defined selection prop (used for synchronising selections between clients)\n  useEffect(() => {\n    if (\n      setSelection !== undefined &&\n      setSelection !== null &&\n      typeof setSelection === 'object'\n    ) {\n      dispatch({ type: actionTypes.SET_SELECTION, payload: setSelection });\n    }\n  }, [setSelection]);\n\n  // User defined filter prop (used for synchronising filters between clients)\n  // Can also be used to set filters from custom interaction components\n  useEffect(() => {\n    if (\n      setFilters !== undefined &&\n      setFilters !== null &&\n      typeof setFilters === 'object'\n    ) {\n      dispatch({ type: actionTypes.SET_FILTERS, payload: setFilters });\n    }\n  }, [setFilters]);\n\n  // Selection of marks\n  useEffect(() => {\n    // Trigger selections callback\n    if (typeof state.onSelection === 'function') {\n      state.onSelection(state.selection);\n    }\n  }, [state.selection]);\n\n  // Filtering of marks\n  useEffect(() => {\n    // Trigger filters callback\n    if (typeof state.onFilter === 'function') {\n      state.onFilter(state.domainMap);\n    }\n  }, [state.domainMap]);\n\n  // CDM\n  useEffect(() => {\n    log.mode();\n  }, []);\n\n  // Compile vis-config\n  useEffect(() => {\n    try {\n      compileVisConfig(config, additionalFilters).then((res) => {\n        // Send compiled config back before transforming\n        if (typeof state.onConfigParsed === 'function') {\n          state.onConfigParsed(res);\n        }\n\n        // Add unique ID to processed dataset for VRIA to reference later\n        res.dataset = res.dataset.map((row, i) => {\n          row.vriaid = i;\n          return row;\n        });\n        // Store\n        dispatch({ type: actionTypes.VIS_CONFIG_COMPILED, payload: res });\n        log.debug('compiledConfig', res);\n      });\n    } catch (err) {\n      log.error(err);\n    }\n  }, [config]);\n\n  return (\n    <DispatchContext.Provider value={dispatch}>\n      <Entity {...rest}>\n        <Entity _ref={setSceneAttributes} />\n        <Camera options={state.options} />\n        <Controllers handedness={state.options.handedness} />\n        {state.filteredDataset\n          ? state.compiledConfig.views.map((view, i) => (\n              <Entity\n                key={`v${i}`}\n                position={rest.position}\n                rotation={rest.rotation}>\n                <View\n                  index={i}\n                  view={view}\n                  options={state.options}\n                  dataset={state.filteredDataset}\n                  parsedDataset={state.parsedDataset}\n                  scales={state.scales[i]}\n                  domainMap={state.domainMap}\n                  selection={state.selection}\n                  customMarks={customMarks}\n                />\n              </Entity>\n            ))\n          : null}\n      </Entity>\n    </DispatchContext.Provider>\n  );\n};\n\nVRIA.propTypes = {\n  config: PropTypes.object.isRequired,\n  options: PropTypes.object,\n  setSelection: PropTypes.object,\n  onSelection: PropTypes.func,\n  onConfigParsed: PropTypes.func,\n  setFilters: PropTypes.object,\n  onFilter: PropTypes.func,\n  additionalFilters: PropTypes.array,\n  customMarks: PropTypes.object\n};\n\nexport default React.memo(VRIA);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","module","AFRAME","registerComponent","schema","colliderEvent","default","colliderEventProperty","colliderEndEvent","colliderEndEventProperty","grabStartButtons","grabEndButtons","stretchStartButtons","stretchEndButtons","dragDropStartButtons","dragDropEndButtons","interval","multiple","init","HOVER_EVENT","UNHOVER_EVENT","GRAB_EVENT","UNGRAB_EVENT","STRETCH_EVENT","UNSTRETCH_EVENT","DRAG_EVENT","UNDRAG_EVENT","DRAGOVER_EVENT","UNDRAGOVER_EVENT","DRAGDROP_EVENT","otherSuperHand","gehDragged","Set","gehClicking","hoverEls","hoverElsIntersections","prevCheckTime","state","Map","dragging","unHover","bind","unWatch","onHit","onGrabStartButton","onGrabEndButton","onStretchStartButton","onStretchEndButton","onDragDropStartButton","onDragDropEndButton","system","registerMe","update","oldData","unRegisterListeners","registerListeners","remove","unregisterMe","get","_unHover","tick","sorter","b","aDist","distance","bDist","time","data","orderChanged","sort","object","el","hover","evt","carried","dispatchMouseEventAll","findTarget","hand","buttonEvent","set","clickables","filter","h","has","grabbed","endEvt","dispatchMouseEvent","clear","emitCancelable","promoteHoveredEl","delete","stretched","dragged","forEach","ddEvt","dropped","on","dropTarget","processHitEl","hitEl","intersection","dist","sects","hitElIndex","indexOf","hoverNeedsUpdate","splice","push","size","detail","Array","isArray","sect","intersections","hvrevt","hoverEl","hovered","clearedEls","skipNextHover","unHovered","_unWatch","target","hoverIndex","addEventListener","Object","keys","removeEventListener","name","bubbles","cancelable","window","CustomEvent","dispatchEvent","relatedTarget","mEvt","MouseEvent","filterUsed","alsoReverse","els","evType","elIndex","eligibleEls","buttonCore","utils","extendDeep","onclick","type","CLICKED_STATE","CLICK_EVENT","UNCLICK_EVENT","clickers","start","end","defaultPrevented","startButtonOk","addState","preventDefault","handIndex","endButtonOk","removeState","inherit","console","warn","HOVERED_STATE","DRAGGED_STATE","hoverStart","dragStart","hoverEnd","dragEnd","dragDrop","dragStartBound","dragEndBound","elementMatches","selector","matches","msMatchesSelector","webkitMatchesSelector","accepts","autoUpdate","acceptEvent","rejectEvent","hoverStartBound","hoverEndBound","dragDropBound","mutateAcceptsBound","mutateAccepts","acceptableEntities","observer","MutationObserver","observerOpts","childList","subtree","prototype","slice","sceneEl","querySelectorAll","observe","disconnect","mutations","query","mutation","addedNodes","added","entityAcceptable","entity","item","emit","physicsCore","buttonsCore","base","maxGrabbers","NaN","invert","suppressX","suppressY","suppressZ","GRABBED_STATE","grabbers","constraints","deltaPositionIsValid","grabDistance","undefined","grabDirection","x","y","z","grabOffset","destPosition","deltaPosition","THREE","Vector3","targetPosition","physicsInit","lostGrabber","physicsUpdate","xFactor","yFactor","zFactor","q","Quaternion","v","entityPosition","grabber","copy","applyQuaternion","object3D","getWorldQuaternion","setLength","add","getWorldPosition","sub","getAttribute","setAttribute","physicsRemove","grabAvailable","Number","isFinite","physicsStart","resetGrabber","physicsEnd","objPos","grabPos","raycaster","distanceTo","direction","origin","physicsIsConstrained","hoverers","buttonIsValid","buttonList","startButtons","endButtons","usePhysics","physicsClear","body","newConId","Math","random","toString","substr","constraintId","removeAttribute","values","world","removeConstraint","physicsIsGrabbing","physicsUpdateRate","STRETCHED_STATE","stretchers","scale","handPos","otherHandPos","oldDat","updateBodies","throttleTick","_updateBodies","timeDelta","currentStretch","deltaStretch","previousStretch","pow","previousPhysicsStretch","multiplyScalar","includes","stretcherIndex","childNodes","stretchBody","physicsShape","offset","shapes","halfExtents","updateConvexPolyhedronRepresentation","radius","updateBoundingSphereRadius","shapeWarned","shapeOffsets","updateBoundingRadius","registerSystem","superHands","comp","index","applyFilters","dataset","domainMap","filteredDataset","marks","document","classList","row","filtersSatisfied","field","vriaid","visConfigCompiled","payload","compiledConfig","parsedDataset","initialDomainMap","cloneDeep","scales","debug","msg","rest","process","env","NODE_ENV","log","error","mode","filterData","value","bound","filteredDomain","newDomainMap","setCallbacks","appCallback","markSelected","selection","dataMap","setMarkData","selectedRow","id","options","multiSelect","next","key","selectColor","showTooltip","tooltip","cursor","tooltipHeight","tooltipContent","setSelection","clearSelection","hasOwnProperty","setFilters","setAdditionalFilters","additionalFilters","setOptions","coreActions","VIS_CONFIG_COMPILED","FILTER_DATA","SET_CALLBACKS","MARK_SELECTED","SET_SELECTION","SET_FILTERS","SET_ADDITIONAL_FILTERS","SET_OPTIONS","reducer","actionTypes","actions","DispatchContext","React","createContext","_moment","moment","parseDataset","config","views","uniqueFields","encodingMap","view","encoding","channel","SUPPORTED_FILE_TYPES","FILE_TYPE","url","split","pop","toLowerCase","transformedDataset","d3","_transformRow","err","then","d","map","Promise","resolve","parseFloat","replace","timeUnit","dfTimeUnit","defaults","timeUnits","year","quarter","month","date","week","day","dayofyear","hours","minutes","seconds","milliseconds","Date","format","validateVisConfig","ajv","Ajv","useDefaults","jsonPointers","validate","compile","valid","errorsText","errors","compileVisConfig","validated","title","allScales","markType","mark","markShape","shape","bar","point","markTooltip","ranges","_getRanges","range","scheme","color","nice","zero","paddingInner","paddingOuter","axis","titlePadding","face","orient","ticks","tickCount","labels","legend","gradient","symbol","xrotation","yrotation","zrotation","domains","_getDomains","_getScales","domain","domainsWithFields","channelFields","width","height","depth","rotation","interpolator","padding","GradientLegend","legendTitle","posrot","xpos","ypos","zpos","xrot","yrot","zrot","background","chartColor","minValue","numberFormat","min","maxValue","max","label","SymbolLegend","customMarks","dispatch","useContext","legendWidth","legendHeight","legendYPos","opacity","isChecked","topOffset","step","checked","checkbox","mouseenter","mouseleave","click","Legend","props","rangesMax","xoffsetLeft","xoffsetRight","propTypes","PropTypes","isRequired","array","memo","prev","Axis","AxisLine","position","tickText","string","XAxis","tickOffset","tickValues","axisTicks","axisTickText","side","anchor","align","axisTitle","showLabels","showTicks","YAxis","ZAxis","Axes","generateTitle","generateAxes","axes","bandwidth","xFace","yFace","zFace","AxisFilters","faces","XFilter","YFilter","ZFilter","mutualProps","Marks","lineHeight","content","fields","markEvents","cursorEl","parentEl","querySelector","attributes","xoffset","yoffset","zoffset","shapeScaleMark","JSON","stringify","className","fTypes","quantField","xPos","yPos","zPos","prevProps","nextProps","isEqual","View","userHeight","legends","markProps","Camera","standardCamera","xOffset","vrCamera","mobileCamera","fuse","fuseTimeout","primitive","radiusInner","radiusOuter","baseColor","shader","camera","device","isMobile","checkHeadsetConnected","Controllers","handedness","setSceneAttributes","setTimeout","vrDisplayConnected","VRIA","onSelection","onConfigParsed","onFilter","useReducer","initialState","useEffect","res","func"],"mappings":"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"}